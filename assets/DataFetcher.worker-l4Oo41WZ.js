(function(){"use strict";const mt="AAK"+Object.keys({light:"mapbox://styles/mapbox/light-v10",dark:"mapbox://styles/vsp-tu-berlin/ckek59op0011219pbwfar1rex",transparentLight:"mapbox://styles/vsp-tu-berlin/clgxnk7m500dt01p687w8e693",transparentDark:"mapbox://styles/vsp-tu-berlin/clgwrqa0w00av01pg5jox0a35"}).length+"QRQ0EldfvmCW4Cyu";var le=(b=>(b[b.NUMBER=0]="NUMBER",b[b.STRING=1]="STRING",b[b.BOOLEAN=2]="BOOLEAN",b[b.DATE=3]="DATE",b[b.LOOKUP=4]="LOOKUP",b[b.UNKNOWN=5]="UNKNOWN",b))(le||{});function ur(){return this._source.cancel()}function yt(b){return/^[nf]$/i.test(b)?!1:/^[yt]$/i.test(b)?!0:null}function bt(b){return new Date(+b.substring(0,4),b.substring(4,6)-1,+b.substring(6,8))}function de(b){return!(b=b.trim())||isNaN(b=+b)?null:b}function At(b){return b.trim()||null}var lr={B:de,C:At,D:bt,F:de,L:yt,M:de,N:de};function cr(){var b=this,c=1;return b._source.slice(b._recordLength).then(function(h){return h&&h[0]!==26?{done:!1,value:b._fields.reduce(function(l,p){return l[p.name]=lr[p.type](b._decode(h.subarray(c,c+=p.length))),l},{})}:{done:!0,value:void 0}})}var Et={B:de,C:At,D:bt,F:de,L:yt,M:de,N:de};const fr={B:le.NUMBER,C:le.STRING,D:le.DATE,F:le.NUMBER,L:le.BOOLEAN,M:le.NUMBER,N:le.NUMBER};function hr(b,c){const h=new Uint8Array(b),l=new DataView(b.slice(0,32)),p=l.getUint16(8,!0),i=new DataView(b.slice(32,p)),e=new _t(h,c,l,i),n={},t=Math.round((h.byteLength-p-1)/e._recordLength);e._fields.length;for(const f of e._fields){const a=fr[f.type],x={values:Et[f.type]===de?new Float32Array(t):[],name:f.name,type:a};n[f.name]=x}let r=0;const s=h.byteLength;try{for(;;){const f=p+r*e._recordLength;if(f+e._recordLength>s)break;const a=h.slice(f,f+e._recordLength);if(a&&a[0]!==26){let R=1;e._fields.reduce(function(x,N){const $=Et[N.type](e._decode(a.slice(R,R+N.length)));n[N.name].values[r]=$,R=R+N.length},{})}else break;r++}}catch(f){console.warn(f)}return console.log("dbf total records",r),n}function _t(b,c,h,l){this._source=b,this._decode=c.decode.bind(c),this._recordLength=h.getUint16(10,!0),this._fields=[];for(var p=0;l.getUint8(p)!==13;p+=32){for(var i=0;i<11&&l.getUint8(p+i)!==0;++i);this._fields.push({name:this._decode(new Uint8Array(l.buffer,l.byteOffset+p,i)),type:String.fromCharCode(l.getUint8(p+11)),length:l.getUint8(p+16)})}}var Rt=_t.prototype;Rt.read=cr,Rt.cancel=ur;function Ne(b){return b&&b.__esModule&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b}function dr(b){if(Object.prototype.hasOwnProperty.call(b,"__esModule"))return b;var c=b.default;if(typeof c=="function"){var h=function l(){return this instanceof l?Reflect.construct(c,arguments,this.constructor):c.apply(this,arguments)};h.prototype=c.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(b).forEach(function(l){var p=Object.getOwnPropertyDescriptor(b,l);Object.defineProperty(h,l,p.get?p:{enumerable:!0,get:function(){return b[l]}})}),h}var Re={exports:{}};/* @license
Papa Parse
v5.3.2
https://github.com/mholt/PapaParse
License: MIT
*/var pr=Re.exports,vt;function gr(){return vt||(vt=1,(function(b,c){(function(h,l){b.exports=l()})(pr,function h(){var l=typeof self<"u"?self:typeof window<"u"?window:l!==void 0?l:{},p=!l.document&&!!l.postMessage,i=p&&/blob:/i.test((l.location||{}).protocol),e={},n=0,t={},r=[];if(t.parse=function(o,u){var v=(u=u||{}).dynamicTyping||!1;if(w(v)&&(u.dynamicTypingFunction=v,v={}),u.dynamicTyping=v,u.transform=!!w(u.transform)&&u.transform,u.worker&&t.WORKERS_SUPPORTED){var C=(function(){if(!t.WORKERS_SUPPORTED)return!1;var k=(q=l.URL||l.webkitURL||null,G=h.toString(),t.BLOB_URL||(t.BLOB_URL=q.createObjectURL(new Blob(["(",G,")();"],{type:"text/javascript"})))),I=new l.Worker(k),q,G;return I.onmessage=m,I.id=n++,e[I.id]=I})();return C.userStep=u.step,C.userChunk=u.chunk,C.userComplete=u.complete,C.userError=u.error,u.step=w(u.step),u.chunk=w(u.chunk),u.complete=w(u.complete),u.error=w(u.error),delete u.worker,void C.postMessage({input:o,config:u,workerId:C.id})}var y=null;return t.NODE_STREAM_INPUT,typeof o=="string"?y=u.download?new a(u):new x(u):o.readable===!0&&w(o.read)&&w(o.on)?y=new N(u):(l.File&&o instanceof File||o instanceof Object)&&(y=new R(u)),y.stream(o)},t.unparse=function(o,u){var v=!1,C=!0,y=",",k=`\r
`,I='"',q=I+I,G=!1,P=null,Q=!1;(function(){if(typeof u=="object"){if(typeof u.delimiter!="string"||t.BAD_DELIMITERS.filter(function(B){return u.delimiter.indexOf(B)!==-1}).length||(y=u.delimiter),(typeof u.quotes=="boolean"||typeof u.quotes=="function"||Array.isArray(u.quotes))&&(v=u.quotes),typeof u.skipEmptyLines!="boolean"&&typeof u.skipEmptyLines!="string"||(G=u.skipEmptyLines),typeof u.newline=="string"&&(k=u.newline),typeof u.quoteChar=="string"&&(I=u.quoteChar),typeof u.header=="boolean"&&(C=u.header),Array.isArray(u.columns)){if(u.columns.length===0)throw new Error("Option columns is empty");P=u.columns}u.escapeChar!==void 0&&(q=u.escapeChar+I),(typeof u.escapeFormulae=="boolean"||u.escapeFormulae instanceof RegExp)&&(Q=u.escapeFormulae instanceof RegExp?u.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var M=new RegExp(d(I),"g");if(typeof o=="string"&&(o=JSON.parse(o)),Array.isArray(o)){if(!o.length||Array.isArray(o[0]))return L(null,o,G);if(typeof o[0]=="object")return L(P||Object.keys(o[0]),o,G)}else if(typeof o=="object")return typeof o.data=="string"&&(o.data=JSON.parse(o.data)),Array.isArray(o.data)&&(o.fields||(o.fields=o.meta&&o.meta.fields||P),o.fields||(o.fields=Array.isArray(o.data[0])?o.fields:typeof o.data[0]=="object"?Object.keys(o.data[0]):[]),Array.isArray(o.data[0])||typeof o.data[0]=="object"||(o.data=[o.data])),L(o.fields||[],o.data||[],G);throw new Error("Unable to serialize unrecognized input");function L(B,ee,T){var S="";typeof B=="string"&&(B=JSON.parse(B)),typeof ee=="string"&&(ee=JSON.parse(ee));var X=Array.isArray(B)&&0<B.length,W=!Array.isArray(ee[0]);if(X&&C){for(var ne=0;ne<B.length;ne++)0<ne&&(S+=y),S+=re(B[ne],ne);0<ee.length&&(S+=k)}for(var K=0;K<ee.length;K++){var j=X?B.length:ee[K].length,Y=!1,oe=X?Object.keys(ee[K]).length===0:ee[K].length===0;if(T&&!X&&(Y=T==="greedy"?ee[K].join("").trim()==="":ee[K].length===1&&ee[K][0].length===0),T==="greedy"&&X){for(var V=[],J=0;J<j;J++){var U=W?B[J]:J;V.push(ee[K][U])}Y=V.join("").trim()===""}if(!Y){for(var z=0;z<j;z++){0<z&&!oe&&(S+=y);var he=X&&W?B[z]:z;S+=re(ee[K][he],z)}K<ee.length-1&&(!T||0<j&&!oe)&&(S+=k)}}return S}function re(B,ee){if(B==null)return"";if(B.constructor===Date)return JSON.stringify(B).slice(1,25);var T=!1;Q&&typeof B=="string"&&Q.test(B)&&(B="'"+B,T=!0);var S=B.toString().replace(M,q);return(T=T||v===!0||typeof v=="function"&&v(B,ee)||Array.isArray(v)&&v[ee]||(function(X,W){for(var ne=0;ne<W.length;ne++)if(-1<X.indexOf(W[ne]))return!0;return!1})(S,t.BAD_DELIMITERS)||-1<S.indexOf(y)||S.charAt(0)===" "||S.charAt(S.length-1)===" ")?I+S+I:S}},t.RECORD_SEP="",t.UNIT_SEP="",t.BYTE_ORDER_MARK="\uFEFF",t.BAD_DELIMITERS=["\r",`
`,'"',t.BYTE_ORDER_MARK],t.WORKERS_SUPPORTED=!p&&!!l.Worker,t.NODE_STREAM_INPUT=1,t.LocalChunkSize=10485760,t.RemoteChunkSize=5242880,t.DefaultDelimiter=",",t.Parser=_,t.ParserHandle=$,t.NetworkStreamer=a,t.FileStreamer=R,t.StringStreamer=x,t.ReadableStreamStreamer=N,l.jQuery){var s=l.jQuery;s.fn.parse=function(o){var u=o.config||{},v=[];return this.each(function(k){if(!(s(this).prop("tagName").toUpperCase()==="INPUT"&&s(this).attr("type").toLowerCase()==="file"&&l.FileReader)||!this.files||this.files.length===0)return!0;for(var I=0;I<this.files.length;I++)v.push({file:this.files[I],inputElem:this,instanceConfig:s.extend({},u)})}),C(),this;function C(){if(v.length!==0){var k,I,q,G,P=v[0];if(w(o.before)){var Q=o.before(P.file,P.inputElem);if(typeof Q=="object"){if(Q.action==="abort")return k="AbortError",I=P.file,q=P.inputElem,G=Q.reason,void(w(o.error)&&o.error({name:k},I,q,G));if(Q.action==="skip")return void y();typeof Q.config=="object"&&(P.instanceConfig=s.extend(P.instanceConfig,Q.config))}else if(Q==="skip")return void y()}var M=P.instanceConfig.complete;P.instanceConfig.complete=function(L){w(M)&&M(L,P.file,P.inputElem),y()},t.parse(P.file,P.instanceConfig)}else w(o.complete)&&o.complete()}function y(){v.splice(0,1),C()}}}function f(o){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],comments:[],meta:{}},function(u){var v=E(u);v.chunkSize=parseInt(v.chunkSize),u.step||u.chunk||(v.chunkSize=null),this._handle=new $(v),(this._handle.streamer=this)._config=v}.call(this,o),this.parseChunk=function(u,v){if(this.isFirstChunk&&w(this._config.beforeFirstChunk)){var C=this._config.beforeFirstChunk(u);C!==void 0&&(u=C)}this.isFirstChunk=!1,this._halted=!1;var y=this._partialLine+u;this._partialLine="";var k=this._handle.parse(y,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var I=k.meta.cursor;this._finished||(this._partialLine=y.substring(I-this._baseIndex),this._baseIndex=I),k&&k.data&&(this._rowCount+=k.data.length);var q=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)l.postMessage({results:k,workerId:t.WORKER_ID,finished:q});else if(w(this._config.chunk)&&!v){if(this._config.chunk(k,this._handle),r=[],this._handle.paused()||this._handle.aborted())return void(this._halted=!0);k=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(k.data),this._completeResults.errors=this._completeResults.errors.concat(k.errors),this._completeResults.comments=this._completeResults.comments.concat(k.comments),this._completeResults.meta=k.meta),this._completed||!q||!w(this._config.complete)||k&&k.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),q||k&&k.meta.paused||this._nextChunk(),k}this._halted=!0},this._sendError=function(u){w(this._config.error)?this._config.error(u):i&&this._config.error&&l.postMessage({workerId:t.WORKER_ID,error:u,finished:!1})}}function a(o){var u;(o=o||{}).chunkSize||(o.chunkSize=t.RemoteChunkSize),f.call(this,o),this._nextChunk=p?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(v){this._input=v,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(u=new XMLHttpRequest,this._config.withCredentials&&(u.withCredentials=this._config.withCredentials),p||(u.onload=A(this._chunkLoaded,this),u.onerror=A(this._chunkError,this)),u.open(this._config.downloadRequestBody?"POST":"GET",this._input,!p),this._config.downloadRequestHeaders){var v=this._config.downloadRequestHeaders;for(var C in v)u.setRequestHeader(C,v[C])}if(this._config.chunkSize){var y=this._start+this._config.chunkSize-1;u.setRequestHeader("Range","bytes="+this._start+"-"+y)}try{u.send(this._config.downloadRequestBody)}catch(k){this._chunkError(k.message)}p&&u.status===0&&this._chunkError()}},this._chunkLoaded=function(){var v;u.readyState===4&&(u.status<200||400<=u.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:u.responseText.length,this._finished=!this._config.chunkSize||this._start>=((v=u.getResponseHeader("Content-Range"))!==null?parseInt(v.substring(v.lastIndexOf("/")+1)):-1),this.parseChunk(u.responseText)))},this._chunkError=function(v){var C=u.statusText||v;this._sendError(new Error(C))}}function R(o){var u,v;(o=o||{}).chunkSize||(o.chunkSize=t.LocalChunkSize),f.call(this,o);var C=typeof FileReader<"u";this.stream=function(y){this._input=y,v=y.slice||y.webkitSlice||y.mozSlice,C?((u=new FileReader).onload=A(this._chunkLoaded,this),u.onerror=A(this._chunkError,this)):u=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var y=this._input;if(this._config.chunkSize){var k=Math.min(this._start+this._config.chunkSize,this._input.size);y=v.call(y,this._start,k)}var I=u.readAsText(y,this._config.encoding);C||this._chunkLoaded({target:{result:I}})},this._chunkLoaded=function(y){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(y.target.result)},this._chunkError=function(){this._sendError(u.error)}}function x(o){var u;f.call(this,o=o||{}),this.stream=function(v){return u=v,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var v,C=this._config.chunkSize;return u=C?(v=u.substring(0,C),u.substring(C)):(v=u,""),this._finished=!u,this.parseChunk(v)}}}function N(o){f.call(this,o=o||{});var u=[],v=!0,C=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(y){this._input=y,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){C&&u.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),u.length?this.parseChunk(u.shift()):v=!0},this._streamData=A(function(y){try{u.push(typeof y=="string"?y:y.toString(this._config.encoding)),v&&(v=!1,this._checkIsFinished(),this.parseChunk(u.shift()))}catch(k){this._streamError(k)}},this),this._streamError=A(function(y){this._streamCleanUp(),this._sendError(y)},this),this._streamEnd=A(function(){this._streamCleanUp(),C=!0,this._streamData("")},this),this._streamCleanUp=A(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function $(o){var u,v,C,y=Math.pow(2,53),k=-y,I=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,q=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,G=this,P=0,Q=0,M=!1,L=!1,re=[],B={data:[],errors:[],comments:[],meta:{}};if(w(o.step)){var ee=o.step;o.step=function(K){if(B=K,X())S();else{if(S(),B.data.length===0)return;P+=K.data.length,o.preview&&P>o.preview?v.abort():(B.data=B.data[0],ee(B,G))}}}function T(K){return o.skipEmptyLines==="greedy"?K.join("").trim()==="":K.length===1&&K[0].length===0}function S(){return B&&C&&(ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+t.DefaultDelimiter+"'"),C=!1),o.skipEmptyLines&&(B.data=B.data.filter(function(K){return!T(K)})),X()&&(function(){if(!B)return;function K(Y,oe){w(o.transformHeader)&&(Y=o.transformHeader(Y,oe)),re.push(Y)}if(Array.isArray(B.data[0])){for(var j=0;X()&&j<B.data.length;j++)B.data[j].forEach(K);B.data.splice(0,1)}else B.data.forEach(K)})(),(function(){if(!B||!o.header&&!o.dynamicTyping&&!o.transform)return B;function K(Y,oe){var V,J=o.header?{}:[];for(V=0;V<Y.length;V++){var U=V,z=Y[V];o.header&&(U=V>=re.length?"__parsed_extra":re[V]),o.transform&&(z=o.transform(z,U)),z=W(U,z),U==="__parsed_extra"?(J[U]=J[U]||[],J[U].push(z)):J[U]=z}return o.header&&(V>re.length?ne("FieldMismatch","TooManyFields","Too many fields: expected "+re.length+" fields but parsed "+V,Q+oe):V<re.length&&ne("FieldMismatch","TooFewFields","Too few fields: expected "+re.length+" fields but parsed "+V,Q+oe)),J}var j=1;return!B.data.length||Array.isArray(B.data[0])?(B.data=B.data.map(K),j=B.data.length):B.data=K(B.data,0),o.header&&B.meta&&(B.meta.fields=re),Q+=j,B})()}function X(){return o.header&&re.length===0}function W(K,j){return Y=K,o.dynamicTypingFunction&&o.dynamicTyping[Y]===void 0&&(o.dynamicTyping[Y]=o.dynamicTypingFunction(Y)),(o.dynamicTyping[Y]||o.dynamicTyping)===!0?j==="true"||j==="TRUE"||j!=="false"&&j!=="FALSE"&&(j.startsWith('"')?j.slice(1):(function(oe){if(I.test(oe)){var V=parseFloat(oe);if(k<V&&V<y)return!0}return!1})(j)?parseFloat(j):q.test(j)?new Date(j):j===""?null:j):j;var Y}function ne(K,j,Y,oe){var V={type:K,code:j,message:Y};oe!==void 0&&(V.row=oe),B.errors.push(V)}this.parse=function(K,j,Y){var oe=o.quoteChar||'"';if(o.newline||(o.newline=(function(U,z){U=U.substring(0,1048576);var he=new RegExp(d(z)+"([^]*?)"+d(z),"gm"),F=(U=U.replace(he,"")).split("\r"),D=U.split(`
`),H=1<D.length&&D[0].length<F[0].length;if(F.length===1||H)return`
`;for(var Z=0,te=0;te<F.length;te++)F[te][0]===`
`&&Z++;return Z>=F.length/2?`\r
`:"\r"})(K,oe)),C=!1,o.delimiter)w(o.delimiter)&&(o.delimiter=o.delimiter(K),B.meta.delimiter=o.delimiter);else{var V=(function(U,z,he,F,D){var H,Z,te,se;D=D||[",","	","|",";",t.RECORD_SEP,t.UNIT_SEP];for(var ie=0;ie<D.length;ie++){var ue=D[ie],fe=0,ge=0,ar=0;te=void 0;for(var Ee=new _({comments:F,delimiter:ue,newline:z,preview:10}).parse(U),xe=0;xe<Ee.data.length;xe++)if(he&&T(Ee.data[xe]))ar++;else{var _e=Ee.data[xe].length;ge+=_e,te!==void 0?0<_e&&(fe+=Math.abs(_e-te),te=_e):te=_e}0<Ee.data.length&&(ge/=Ee.data.length-ar),(Z===void 0||fe<=Z)&&(se===void 0||se<ge)&&1.99<ge&&(Z=fe,H=ue,se=ge)}return{successful:!!(o.delimiter=H),bestDelimiter:H}})(K,o.newline,o.skipEmptyLines,o.comments,o.delimitersToGuess);V.successful?o.delimiter=V.bestDelimiter:(C=!0,o.delimiter=t.DefaultDelimiter),B.meta.delimiter=o.delimiter}var J=E(o);return o.preview&&o.header&&J.preview++,u=K,v=new _(J),B=v.parse(u,j,Y),S(),M?{meta:{paused:!0}}:B||{meta:{paused:!1}}},this.paused=function(){return M},this.pause=function(){M=!0,v.abort(),u=w(o.chunk)?"":u.substring(v.getCharIndex())},this.resume=function(){G.streamer._halted?(M=!1,G.streamer.parseChunk(u,!0)):setTimeout(G.resume,3)},this.aborted=function(){return L},this.abort=function(){L=!0,v.abort(),B.meta.aborted=!0,w(o.complete)&&o.complete(B),u=""}}function d(o){return o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _(o){var u,v=(o=o||{}).delimiter,C=o.newline,y=o.comments,k=o.step,I=o.preview,q=o.fastMode,G=u=o.quoteChar===void 0||o.quoteChar===null?'"':o.quoteChar;if(o.escapeChar!==void 0&&(G=o.escapeChar),(typeof v!="string"||-1<t.BAD_DELIMITERS.indexOf(v))&&(v=","),y===v)throw new Error("Comment character same as delimiter");y===!0?y="#":(typeof y!="string"||-1<t.BAD_DELIMITERS.indexOf(y))&&(y=!1),C!==`
`&&C!=="\r"&&C!==`\r
`&&(C=`
`);var P=0,Q=!1;this.parse=function(M,L,re){if(typeof M!="string")throw new Error("Input must be a string");var B=M.length,ee=v.length,T=C.length,S=y.length,X=w(k),W=[],ne=[],K=[],j=P=0;if(!M)return se();if(q||q!==!1&&M.indexOf(u)===-1){for(var Y=M.split(C),oe=0;oe<Y.length;oe++){if(K=Y[oe],P+=K.length,oe!==Y.length-1)P+=C.length;else if(re)return se();if(y&&K.substring(0,S)===y)r.push(K);else{if(X){if(W=[],D(K.split(v)),ie(),Q)return se()}else D(K.split(v));if(I&&I<=oe)return W=W.slice(0,I),se(!0)}}return se()}for(var V=M.indexOf(v,P),J=M.indexOf(C,P),U=new RegExp(d(G)+d(u),"g"),z=M.indexOf(u,P);;)if(M[P]!==u)if(y&&K.length===0&&M.substring(P,P+S)===y){if(J===-1)return se();P=J+T,J=M.indexOf(C,P),V=M.indexOf(v,P)}else if(V!==-1&&(V<J||J===-1))K.push(M.substring(P,V)),P=V+ee,V=M.indexOf(v,P);else{if(J===-1)break;if(K.push(M.substring(P,J)),te(J+T),X&&(ie(),Q))return se();if(I&&W.length>=I)return se(!0)}else for(z=P,P++;;){if((z=M.indexOf(u,z+1))===-1)return re||ne.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:W.length,index:P}),Z();if(z===B-1)return Z(M.substring(P,z).replace(U,u));if(u!==G||M[z+1]!==G){if(u===G||z===0||M[z-1]!==G){V!==-1&&V<z+1&&(V=M.indexOf(v,z+1)),J!==-1&&J<z+1&&(J=M.indexOf(C,z+1));var he=H(J===-1?V:Math.min(V,J));if(M.substr(z+1+he,ee)===v){K.push(M.substring(P-1,z).replace(U,u)),M[P=z+1+he+ee]!==u&&(z=M.indexOf(u,P)),V=M.indexOf(v,P),J=M.indexOf(C,P);break}var F=H(J);if(M.substring(z+1+F,z+1+F+T)===C){if(K.push(M.substring(P-1,z).replace(U,u)),te(z+1+F+T),V=M.indexOf(v,P),z=M.indexOf(u,P),X&&(ie(),Q))return se();if(I&&W.length>=I)return se(!0);break}ne.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:W.length,index:P}),z++}}else z++}return Z();function D(ue){W.push(ue),j=P}function H(ue){var fe=0;if(ue!==-1){var ge=M.substring(z+1,ue);ge&&ge.trim()===""&&(fe=ge.length)}return fe}function Z(ue){return re||(ue===void 0&&(ue=M.substring(P)),K.push(ue),P=B,D(K),X&&ie()),se()}function te(ue){P=ue,D(K),K=[],J=M.indexOf(C,P)}function se(ue){var fe=JSON.parse(JSON.stringify(r));return{data:W,errors:ne,comments:fe,meta:{delimiter:v,linebreak:C,aborted:Q,truncated:!!ue,cursor:j+(L||0)}}}function ie(){k(se()),W=[],ne=[]}},this.abort=function(){Q=!0},this.getCharIndex=function(){return P}}function m(o){var u=o.data,v=e[u.workerId],C=!1;if(u.error)v.userError(u.error,u.file);else if(u.results&&u.results.data){var y={abort:function(){C=!0,O(u.workerId,{data:[],comments:[],errors:[],meta:{aborted:!0}})},pause:g,resume:g};if(w(v.userStep)){for(var k=0;k<u.results.data.length&&(v.userStep({data:u.results.data[k],errors:u.results.errors,comments:u.results.comments,meta:u.results.meta},y),!C);k++);delete u.results}else w(v.userChunk)&&(v.userChunk(u.results,y,u.file),delete u.results)}u.finished&&!C&&O(u.workerId,u.results)}function O(o,u){var v=e[o];w(v.userComplete)&&v.userComplete(u),v.terminate(),delete e[o]}function g(){throw new Error("Not implemented.")}function E(o){if(typeof o!="object"||o===null)return o;var u=Array.isArray(o)?[]:{};for(var v in o)u[v]=E(o[v]);return u}function A(o,u){return function(){o.apply(u,arguments)}}function w(o){return typeof o=="function"}return i&&(l.onmessage=function(o){var u=o.data;if(t.WORKER_ID===void 0&&u&&(t.WORKER_ID=u.workerId),typeof u.input=="string")l.postMessage({workerId:t.WORKER_ID,results:t.parse(u.input,u.config),finished:!0});else if(l.File&&u.input instanceof File||u.input instanceof Object){var v=t.parse(u.input,u.config);v&&l.postMessage({workerId:t.WORKER_ID,results:v,finished:!0})}}),(a.prototype=Object.create(f.prototype)).constructor=a,(R.prototype=Object.create(f.prototype)).constructor=R,(x.prototype=Object.create(x.prototype)).constructor=x,(N.prototype=Object.create(f.prototype)).constructor=N,t})})(Re)),Re.exports}var mr=gr(),yr=Ne(mr),br={},Ar=Object.freeze({__proto__:null,default:br}),Ct=dr(Ar),Se={},wt;function Te(){return wt||(wt=1,(function(b){b.isInteger=c=>typeof c=="number"?Number.isInteger(c):typeof c=="string"&&c.trim()!==""?Number.isInteger(Number(c)):!1,b.find=(c,h)=>c.nodes.find(l=>l.type===h),b.exceedsLimit=(c,h,l=1,p)=>p===!1||!b.isInteger(c)||!b.isInteger(h)?!1:(Number(h)-Number(c))/Number(l)>=p,b.escapeNode=(c,h=0,l)=>{const p=c.nodes[h];p&&(l&&p.type===l||p.type==="open"||p.type==="close")&&p.escaped!==!0&&(p.value="\\"+p.value,p.escaped=!0)},b.encloseBrace=c=>c.type!=="brace"?!1:c.commas>>0+c.ranges>>0===0?(c.invalid=!0,!0):!1,b.isInvalidBrace=c=>c.type!=="brace"?!1:c.invalid===!0||c.dollar?!0:c.commas>>0+c.ranges>>0===0||c.open!==!0||c.close!==!0?(c.invalid=!0,!0):!1,b.isOpenOrClose=c=>c.type==="open"||c.type==="close"?!0:c.open===!0||c.close===!0,b.reduce=c=>c.reduce((h,l)=>(l.type==="text"&&h.push(l.value),l.type==="range"&&(l.type="text"),h),[]),b.flatten=(...c)=>{const h=[],l=p=>{for(let i=0;i<p.length;i++){const e=p[i];if(Array.isArray(e)){l(e);continue}e!==void 0&&h.push(e)}return h};return l(c),h}})(Se)),Se}var Oe,xt;function Le(){if(xt)return Oe;xt=1;const b=Te();return Oe=(c,h={})=>{const l=(p,i={})=>{const e=h.escapeInvalid&&b.isInvalidBrace(i),n=p.invalid===!0&&h.escapeInvalid===!0;let t="";if(p.value)return(e||n)&&b.isOpenOrClose(p)?"\\"+p.value:p.value;if(p.value)return p.value;if(p.nodes)for(const r of p.nodes)t+=l(r);return t};return l(c)},Oe}/*!
 * is-number <https://github.com/jonschlinkert/is-number>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Released under the MIT License.
 */var $e,Nt;function Er(){return Nt||(Nt=1,$e=function(b){return typeof b=="number"?b-b===0:typeof b=="string"&&b.trim()!==""?Number.isFinite?Number.isFinite(+b):isFinite(+b):!1}),$e}/*!
 * to-regex-range <https://github.com/micromatch/to-regex-range>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */var Ie,St;function _r(){if(St)return Ie;St=1;const b=Er(),c=($,d,_)=>{if(b($)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(d===void 0||$===d)return String($);if(b(d)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let m={relaxZeros:!0,..._};typeof m.strictZeros=="boolean"&&(m.relaxZeros=m.strictZeros===!1);let O=String(m.relaxZeros),g=String(m.shorthand),E=String(m.capture),A=String(m.wrap),w=$+":"+d+"="+O+g+E+A;if(c.cache.hasOwnProperty(w))return c.cache[w].result;let o=Math.min($,d),u=Math.max($,d);if(Math.abs(o-u)===1){let I=$+"|"+d;return m.capture?`(${I})`:m.wrap===!1?I:`(?:${I})`}let v=x($)||x(d),C={min:$,max:d,a:o,b:u},y=[],k=[];if(v&&(C.isPadded=v,C.maxLen=String(C.max).length),o<0){let I=u<0?Math.abs(u):1;k=i(I,Math.abs(o),C,m),o=C.a=0}return u>=0&&(y=i(o,u,C,m)),C.negatives=k,C.positives=y,C.result=h(k,y),m.capture===!0?C.result=`(${C.result})`:m.wrap!==!1&&y.length+k.length>1&&(C.result=`(?:${C.result})`),c.cache[w]=C,C.result};function h($,d,_){let m=e($,d,"-",!1)||[],O=e(d,$,"",!1)||[],g=e($,d,"-?",!0)||[];return m.concat(g).concat(O).join("|")}function l($,d){let _=1,m=1,O=s($,_),g=new Set([d]);for(;$<=O&&O<=d;)g.add(O),_+=1,O=s($,_);for(O=f(d+1,m)-1;$<O&&O<=d;)g.add(O),m+=1,O=f(d+1,m)-1;return g=[...g],g.sort(t),g}function p($,d,_){if($===d)return{pattern:$,count:[],digits:0};let m=n($,d),O=m.length,g="",E=0;for(let A=0;A<O;A++){let[w,o]=m[A];w===o?g+=w:w!=="0"||o!=="9"?g+=R(w,o):E++}return E&&(g+=_.shorthand===!0?"\\d":"[0-9]"),{pattern:g,count:[E],digits:O}}function i($,d,_,m){let O=l($,d),g=[],E=$,A;for(let w=0;w<O.length;w++){let o=O[w],u=p(String(E),String(o),m),v="";if(!_.isPadded&&A&&A.pattern===u.pattern){A.count.length>1&&A.count.pop(),A.count.push(u.count[0]),A.string=A.pattern+a(A.count),E=o+1;continue}_.isPadded&&(v=N(o,_,m)),u.string=v+u.pattern+a(u.count),g.push(u),E=o+1,A=u}return g}function e($,d,_,m,O){let g=[];for(let E of $){let{string:A}=E;!m&&!r(d,"string",A)&&g.push(_+A),m&&r(d,"string",A)&&g.push(_+A)}return g}function n($,d){let _=[];for(let m=0;m<$.length;m++)_.push([$[m],d[m]]);return _}function t($,d){return $>d?1:d>$?-1:0}function r($,d,_){return $.some(m=>m[d]===_)}function s($,d){return Number(String($).slice(0,-d)+"9".repeat(d))}function f($,d){return $-$%Math.pow(10,d)}function a($){let[d=0,_=""]=$;return _||d>1?`{${d+(_?","+_:"")}}`:""}function R($,d,_){return`[${$}${d-$===1?"":"-"}${d}]`}function x($){return/^-?(0+)\d/.test($)}function N($,d,_){if(!d.isPadded)return $;let m=Math.abs(d.maxLen-String($).length),O=_.relaxZeros!==!1;switch(m){case 0:return"";case 1:return O?"0?":"0";case 2:return O?"0{0,2}":"00";default:return O?`0{0,${m}}`:`0{${m}}`}}return c.cache={},c.clearCache=()=>c.cache={},Ie=c,Ie}/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */var ke,Tt;function Ot(){if(Tt)return ke;Tt=1;const b=Ct,c=_r(),h=m=>m!==null&&typeof m=="object"&&!Array.isArray(m),l=m=>O=>m===!0?Number(O):String(O),p=m=>typeof m=="number"||typeof m=="string"&&m!=="",i=m=>Number.isInteger(+m),e=m=>{let O=`${m}`,g=-1;if(O[0]==="-"&&(O=O.slice(1)),O==="0")return!1;for(;O[++g]==="0";);return g>0},n=(m,O,g)=>typeof m=="string"||typeof O=="string"?!0:g.stringify===!0,t=(m,O,g)=>{if(O>0){let E=m[0]==="-"?"-":"";E&&(m=m.slice(1)),m=E+m.padStart(E?O-1:O,"0")}return g===!1?String(m):m},r=(m,O)=>{let g=m[0]==="-"?"-":"";for(g&&(m=m.slice(1),O--);m.length<O;)m="0"+m;return g?"-"+m:m},s=(m,O,g)=>{m.negatives.sort((u,v)=>u<v?-1:u>v?1:0),m.positives.sort((u,v)=>u<v?-1:u>v?1:0);let E=O.capture?"":"?:",A="",w="",o;return m.positives.length&&(A=m.positives.map(u=>r(String(u),g)).join("|")),m.negatives.length&&(w=`-(${E}${m.negatives.map(u=>r(String(u),g)).join("|")})`),A&&w?o=`${A}|${w}`:o=A||w,O.wrap?`(${E}${o})`:o},f=(m,O,g,E)=>{if(g)return c(m,O,{wrap:!1,...E});let A=String.fromCharCode(m);if(m===O)return A;let w=String.fromCharCode(O);return`[${A}-${w}]`},a=(m,O,g)=>{if(Array.isArray(m)){let E=g.wrap===!0,A=g.capture?"":"?:";return E?`(${A}${m.join("|")})`:m.join("|")}return c(m,O,g)},R=(...m)=>new RangeError("Invalid range arguments: "+b.inspect(...m)),x=(m,O,g)=>{if(g.strictRanges===!0)throw R([m,O]);return[]},N=(m,O)=>{if(O.strictRanges===!0)throw new TypeError(`Expected step "${m}" to be a number`);return[]},$=(m,O,g=1,E={})=>{let A=Number(m),w=Number(O);if(!Number.isInteger(A)||!Number.isInteger(w)){if(E.strictRanges===!0)throw R([m,O]);return[]}A===0&&(A=0),w===0&&(w=0);let o=A>w,u=String(m),v=String(O),C=String(g);g=Math.max(Math.abs(g),1);let y=e(u)||e(v)||e(C),k=y?Math.max(u.length,v.length,C.length):0,I=y===!1&&n(m,O,E)===!1,q=E.transform||l(I);if(E.toRegex&&g===1)return f(r(m,k),r(O,k),!0,E);let G={negatives:[],positives:[]},P=L=>G[L<0?"negatives":"positives"].push(Math.abs(L)),Q=[],M=0;for(;o?A>=w:A<=w;)E.toRegex===!0&&g>1?P(A):Q.push(t(q(A,M),k,I)),A=o?A-g:A+g,M++;return E.toRegex===!0?g>1?s(G,E,k):a(Q,null,{wrap:!1,...E}):Q},d=(m,O,g=1,E={})=>{if(!i(m)&&m.length>1||!i(O)&&O.length>1)return x(m,O,E);let A=E.transform||(I=>String.fromCharCode(I)),w=`${m}`.charCodeAt(0),o=`${O}`.charCodeAt(0),u=w>o,v=Math.min(w,o),C=Math.max(w,o);if(E.toRegex&&g===1)return f(v,C,!1,E);let y=[],k=0;for(;u?w>=o:w<=o;)y.push(A(w,k)),w=u?w-g:w+g,k++;return E.toRegex===!0?a(y,null,{wrap:!1,options:E}):y},_=(m,O,g,E={})=>{if(O==null&&p(m))return[m];if(!p(m)||!p(O))return x(m,O,E);if(typeof g=="function")return _(m,O,1,{transform:g});if(h(g))return _(m,O,0,g);let A={...E};return A.capture===!0&&(A.wrap=!0),g=g||A.step||1,i(g)?i(m)&&i(O)?$(m,O,g,A):d(m,O,Math.max(Math.abs(g),1),A):g!=null&&!h(g)?N(g,A):_(m,O,1,g)};return ke=_,ke}var He,Lt;function Rr(){if(Lt)return He;Lt=1;const b=Ot(),c=Te();return He=(l,p={})=>{const i=(e,n={})=>{const t=c.isInvalidBrace(n),r=e.invalid===!0&&p.escapeInvalid===!0,s=t===!0||r===!0,f=p.escapeInvalid===!0?"\\":"";let a="";if(e.isOpen===!0)return f+e.value;if(e.isClose===!0)return console.log("node.isClose",f,e.value),f+e.value;if(e.type==="open")return s?f+e.value:"(";if(e.type==="close")return s?f+e.value:")";if(e.type==="comma")return e.prev.type==="comma"?"":s?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){const R=c.reduce(e.nodes),x=b(...R,{...p,wrap:!1,toRegex:!0,strictZeros:!0});if(x.length!==0)return R.length>1&&x.length>1?`(${x})`:x}if(e.nodes)for(const R of e.nodes)a+=i(R,e);return a};return i(l)},He}var Pe,$t;function vr(){if($t)return Pe;$t=1;const b=Ot(),c=Le(),h=Te(),l=(i="",e="",n=!1)=>{const t=[];if(i=[].concat(i),e=[].concat(e),!e.length)return i;if(!i.length)return n?h.flatten(e).map(r=>`{${r}}`):e;for(const r of i)if(Array.isArray(r))for(const s of r)t.push(l(s,e,n));else for(let s of e)n===!0&&typeof s=="string"&&(s=`{${s}}`),t.push(Array.isArray(s)?l(r,s,n):r+s);return h.flatten(t)};return Pe=(i,e={})=>{const n=e.rangeLimit===void 0?1e3:e.rangeLimit,t=(r,s={})=>{r.queue=[];let f=s,a=s.queue;for(;f.type!=="brace"&&f.type!=="root"&&f.parent;)f=f.parent,a=f.queue;if(r.invalid||r.dollar){a.push(l(a.pop(),c(r,e)));return}if(r.type==="brace"&&r.invalid!==!0&&r.nodes.length===2){a.push(l(a.pop(),["{}"]));return}if(r.nodes&&r.ranges>0){const $=h.reduce(r.nodes);if(h.exceedsLimit(...$,e.step,n))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let d=b(...$,e);d.length===0&&(d=c(r,e)),a.push(l(a.pop(),d)),r.nodes=[];return}const R=h.encloseBrace(r);let x=r.queue,N=r;for(;N.type!=="brace"&&N.type!=="root"&&N.parent;)N=N.parent,x=N.queue;for(let $=0;$<r.nodes.length;$++){const d=r.nodes[$];if(d.type==="comma"&&r.type==="brace"){$===1&&x.push(""),x.push("");continue}if(d.type==="close"){a.push(l(a.pop(),x,R));continue}if(d.value&&d.type!=="open"){x.push(l(x.pop(),d.value));continue}d.nodes&&t(d,r)}return x};return h.flatten(t(i))},Pe}var Fe,It;function Cr(){return It||(It=1,Fe={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"Â ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}),Fe}var Be,kt;function wr(){if(kt)return Be;kt=1;const b=Le(),{MAX_LENGTH:c,CHAR_BACKSLASH:h,CHAR_BACKTICK:l,CHAR_COMMA:p,CHAR_DOT:i,CHAR_LEFT_PARENTHESES:e,CHAR_RIGHT_PARENTHESES:n,CHAR_LEFT_CURLY_BRACE:t,CHAR_RIGHT_CURLY_BRACE:r,CHAR_LEFT_SQUARE_BRACKET:s,CHAR_RIGHT_SQUARE_BRACKET:f,CHAR_DOUBLE_QUOTE:a,CHAR_SINGLE_QUOTE:R,CHAR_NO_BREAK_SPACE:x,CHAR_ZERO_WIDTH_NOBREAK_SPACE:N}=Cr();return Be=(d,_={})=>{if(typeof d!="string")throw new TypeError("Expected a string");const m=_||{},O=typeof m.maxLength=="number"?Math.min(c,m.maxLength):c;if(d.length>O)throw new SyntaxError(`Input length (${d.length}), exceeds max characters (${O})`);const g={type:"root",input:d,nodes:[]},E=[g];let A=g,w=g,o=0;const u=d.length;let v=0,C=0,y;const k=()=>d[v++],I=q=>{if(q.type==="text"&&w.type==="dot"&&(w.type="text"),w&&w.type==="text"&&q.type==="text"){w.value+=q.value;return}return A.nodes.push(q),q.parent=A,q.prev=w,w=q,q};for(I({type:"bos"});v<u;)if(A=E[E.length-1],y=k(),!(y===N||y===x)){if(y===h){I({type:"text",value:(_.keepEscaping?y:"")+k()});continue}if(y===f){I({type:"text",value:"\\"+y});continue}if(y===s){o++;let q;for(;v<u&&(q=k());){if(y+=q,q===s){o++;continue}if(q===h){y+=k();continue}if(q===f&&(o--,o===0))break}I({type:"text",value:y});continue}if(y===e){A=I({type:"paren",nodes:[]}),E.push(A),I({type:"text",value:y});continue}if(y===n){if(A.type!=="paren"){I({type:"text",value:y});continue}A=E.pop(),I({type:"text",value:y}),A=E[E.length-1];continue}if(y===a||y===R||y===l){const q=y;let G;for(_.keepQuotes!==!0&&(y="");v<u&&(G=k());){if(G===h){y+=G+k();continue}if(G===q){_.keepQuotes===!0&&(y+=G);break}y+=G}I({type:"text",value:y});continue}if(y===t){C++;const G={type:"brace",open:!0,close:!1,dollar:w.value&&w.value.slice(-1)==="$"||A.dollar===!0,depth:C,commas:0,ranges:0,nodes:[]};A=I(G),E.push(A),I({type:"open",value:y});continue}if(y===r){if(A.type!=="brace"){I({type:"text",value:y});continue}const q="close";A=E.pop(),A.close=!0,I({type:q,value:y}),C--,A=E[E.length-1];continue}if(y===p&&C>0){if(A.ranges>0){A.ranges=0;const q=A.nodes.shift();A.nodes=[q,{type:"text",value:b(A)}]}I({type:"comma",value:y}),A.commas++;continue}if(y===i&&C>0&&A.commas===0){const q=A.nodes;if(C===0||q.length===0){I({type:"text",value:y});continue}if(w.type==="dot"){if(A.range=[],w.value+=y,w.type="range",A.nodes.length!==3&&A.nodes.length!==5){A.invalid=!0,A.ranges=0,w.type="text";continue}A.ranges++,A.args=[];continue}if(w.type==="range"){q.pop();const G=q[q.length-1];G.value+=w.value+y,w=G,A.ranges--;continue}I({type:"dot",value:y});continue}I({type:"text",value:y})}do if(A=E.pop(),A.type!=="root"){A.nodes.forEach(P=>{P.nodes||(P.type==="open"&&(P.isOpen=!0),P.type==="close"&&(P.isClose=!0),P.nodes||(P.type="text"),P.invalid=!0)});const q=E[E.length-1],G=q.nodes.indexOf(A);q.nodes.splice(G,1,...A.nodes)}while(E.length>0);return I({type:"eos"}),g},Be}var Me,Ht;function xr(){if(Ht)return Me;Ht=1;const b=Le(),c=Rr(),h=vr(),l=wr(),p=(i,e={})=>{let n=[];if(Array.isArray(i))for(const t of i){const r=p.create(t,e);Array.isArray(r)?n.push(...r):n.push(r)}else n=[].concat(p.create(i,e));return e&&e.expand===!0&&e.nodupes===!0&&(n=[...new Set(n)]),n};return p.parse=(i,e={})=>l(i,e),p.stringify=(i,e={})=>b(typeof i=="string"?p.parse(i,e):i,e),p.compile=(i,e={})=>(typeof i=="string"&&(i=p.parse(i,e)),c(i,e)),p.expand=(i,e={})=>{typeof i=="string"&&(i=p.parse(i,e));let n=h(i,e);return e.noempty===!0&&(n=n.filter(Boolean)),e.nodupes===!0&&(n=[...new Set(n)]),n},p.create=(i,e={})=>i===""||i.length<3?[i]:e.expand!==!0?p.compile(i,e):p.expand(i,e),Me=p,Me}var Ue,Pt;function qe(){if(Pt)return Ue;Pt=1;function b(p){if(typeof p!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(p))}function c(p,i){for(var e="",n=0,t=-1,r=0,s,f=0;f<=p.length;++f){if(f<p.length)s=p.charCodeAt(f);else{if(s===47)break;s=47}if(s===47){if(!(t===f-1||r===1))if(t!==f-1&&r===2){if(e.length<2||n!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var a=e.lastIndexOf("/");if(a!==e.length-1){a===-1?(e="",n=0):(e=e.slice(0,a),n=e.length-1-e.lastIndexOf("/")),t=f,r=0;continue}}else if(e.length===2||e.length===1){e="",n=0,t=f,r=0;continue}}i&&(e.length>0?e+="/..":e="..",n=2)}else e.length>0?e+="/"+p.slice(t+1,f):e=p.slice(t+1,f),n=f-t-1;t=f,r=0}else s===46&&r!==-1?++r:r=-1}return e}function h(p,i){var e=i.dir||i.root,n=i.base||(i.name||"")+(i.ext||"");return e?e===i.root?e+n:e+p+n:n}var l={resolve:function(){for(var i="",e=!1,n,t=arguments.length-1;t>=-1&&!e;t--){var r;t>=0?r=arguments[t]:(n===void 0&&(n=process.cwd()),r=n),b(r),r.length!==0&&(i=r+"/"+i,e=r.charCodeAt(0)===47)}return i=c(i,!e),e?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(b(i),i.length===0)return".";var e=i.charCodeAt(0)===47,n=i.charCodeAt(i.length-1)===47;return i=c(i,!e),i.length===0&&!e&&(i="."),i.length>0&&n&&(i+="/"),e?"/"+i:i},isAbsolute:function(i){return b(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,e=0;e<arguments.length;++e){var n=arguments[e];b(n),n.length>0&&(i===void 0?i=n:i+="/"+n)}return i===void 0?".":l.normalize(i)},relative:function(i,e){if(b(i),b(e),i===e||(i=l.resolve(i),e=l.resolve(e),i===e))return"";for(var n=1;n<i.length&&i.charCodeAt(n)===47;++n);for(var t=i.length,r=t-n,s=1;s<e.length&&e.charCodeAt(s)===47;++s);for(var f=e.length,a=f-s,R=r<a?r:a,x=-1,N=0;N<=R;++N){if(N===R){if(a>R){if(e.charCodeAt(s+N)===47)return e.slice(s+N+1);if(N===0)return e.slice(s+N)}else r>R&&(i.charCodeAt(n+N)===47?x=N:N===0&&(x=0));break}var $=i.charCodeAt(n+N),d=e.charCodeAt(s+N);if($!==d)break;$===47&&(x=N)}var _="";for(N=n+x+1;N<=t;++N)(N===t||i.charCodeAt(N)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+e.slice(s+x):(s+=x,e.charCodeAt(s)===47&&++s,e.slice(s))},_makeLong:function(i){return i},dirname:function(i){if(b(i),i.length===0)return".";for(var e=i.charCodeAt(0),n=e===47,t=-1,r=!0,s=i.length-1;s>=1;--s)if(e=i.charCodeAt(s),e===47){if(!r){t=s;break}}else r=!1;return t===-1?n?"/":".":n&&t===1?"//":i.slice(0,t)},basename:function(i,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');b(i);var n=0,t=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e.length===i.length&&e===i)return"";var f=e.length-1,a=-1;for(s=i.length-1;s>=0;--s){var R=i.charCodeAt(s);if(R===47){if(!r){n=s+1;break}}else a===-1&&(r=!1,a=s+1),f>=0&&(R===e.charCodeAt(f)?--f===-1&&(t=s):(f=-1,t=a))}return n===t?t=a:t===-1&&(t=i.length),i.slice(n,t)}else{for(s=i.length-1;s>=0;--s)if(i.charCodeAt(s)===47){if(!r){n=s+1;break}}else t===-1&&(r=!1,t=s+1);return t===-1?"":i.slice(n,t)}},extname:function(i){b(i);for(var e=-1,n=0,t=-1,r=!0,s=0,f=i.length-1;f>=0;--f){var a=i.charCodeAt(f);if(a===47){if(!r){n=f+1;break}continue}t===-1&&(r=!1,t=f+1),a===46?e===-1?e=f:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||t===-1||s===0||s===1&&e===t-1&&e===n+1?"":i.slice(e,t)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return h("/",i)},parse:function(i){b(i);var e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;var n=i.charCodeAt(0),t=n===47,r;t?(e.root="/",r=1):r=0;for(var s=-1,f=0,a=-1,R=!0,x=i.length-1,N=0;x>=r;--x){if(n=i.charCodeAt(x),n===47){if(!R){f=x+1;break}continue}a===-1&&(R=!1,a=x+1),n===46?s===-1?s=x:N!==1&&(N=1):s!==-1&&(N=-1)}return s===-1||a===-1||N===0||N===1&&s===a-1&&s===f+1?a!==-1&&(f===0&&t?e.base=e.name=i.slice(1,a):e.base=e.name=i.slice(f,a)):(f===0&&t?(e.name=i.slice(1,s),e.base=i.slice(1,a)):(e.name=i.slice(f,s),e.base=i.slice(f,a)),e.ext=i.slice(s,a)),f>0?e.dir=i.slice(0,f-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};return l.posix=l,Ue=l,Ue}var Ge={},ze,Ft;function ve(){if(Ft)return ze;Ft=1;const b=qe(),c="\\\\/",h=`[^${c}]`,l="\\.",p="\\+",i="\\?",e="\\/",n="(?=.)",t="[^/]",r=`(?:${e}|$)`,s=`(?:^|${e})`,f=`${l}{1,2}${r}`,a=`(?!${l})`,R=`(?!${s}${f})`,x=`(?!${l}{0,1}${r})`,N=`(?!${f})`,$=`[^.${e}]`,d=`${t}*?`,_={DOT_LITERAL:l,PLUS_LITERAL:p,QMARK_LITERAL:i,SLASH_LITERAL:e,ONE_CHAR:n,QMARK:t,END_ANCHOR:r,DOTS_SLASH:f,NO_DOT:a,NO_DOTS:R,NO_DOT_SLASH:x,NO_DOTS_SLASH:N,QMARK_NO_DOT:$,STAR:d,START_ANCHOR:s},m={..._,SLASH_LITERAL:`[${c}]`,QMARK:h,STAR:`${h}*?`,DOTS_SLASH:`${l}{1,2}(?:[${c}]|$)`,NO_DOT:`(?!${l})`,NO_DOTS:`(?!(?:^|[${c}])${l}{1,2}(?:[${c}]|$))`,NO_DOT_SLASH:`(?!${l}{0,1}(?:[${c}]|$))`,NO_DOTS_SLASH:`(?!${l}{1,2}(?:[${c}]|$))`,QMARK_NO_DOT:`[^.${c}]`,START_ANCHOR:`(?:^|[${c}])`,END_ANCHOR:`(?:[${c}]|$)`},O={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};return ze={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:O,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:b.sep,extglobChars(g){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${g.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(g){return g===!0?m:_}},ze}var Bt;function Ce(){return Bt||(Bt=1,(function(b){const c=qe(),{REGEX_BACKSLASH:h,REGEX_REMOVE_BACKSLASH:l,REGEX_SPECIAL_CHARS:p,REGEX_SPECIAL_CHARS_GLOBAL:i}=ve();b.isObject=e=>e!==null&&typeof e=="object"&&!Array.isArray(e),b.hasRegexChars=e=>p.test(e),b.isRegexChar=e=>e.length===1&&b.hasRegexChars(e),b.escapeRegex=e=>e.replace(i,"\\$1"),b.toPosixSlashes=e=>e.replace(h,"/"),b.removeBackslashes=e=>e.replace(l,n=>n==="\\"?"":n),b.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return e.length===3&&e[0]>=9||e[0]===8&&e[1]>=10},b.isWindows=e=>e&&typeof e.windows=="boolean"?e.windows:c.sep==="\\",b.escapeLast=(e,n,t)=>{const r=e.lastIndexOf(n,t);return r===-1?e:e[r-1]==="\\"?b.escapeLast(e,n,r-1):`${e.slice(0,r)}\\${e.slice(r)}`},b.removePrefix=(e,n={})=>{let t=e;return t.startsWith("./")&&(t=t.slice(2),n.prefix="./"),t},b.wrapOutput=(e,n={},t={})=>{const r=t.contains?"":"^",s=t.contains?"":"$";let f=`${r}(?:${e})${s}`;return n.negated===!0&&(f=`(?:^(?!${f}).*$)`),f}})(Ge)),Ge}var Ke,Mt;function Nr(){if(Mt)return Ke;Mt=1;const b=Ce(),{CHAR_ASTERISK:c,CHAR_AT:h,CHAR_BACKWARD_SLASH:l,CHAR_COMMA:p,CHAR_DOT:i,CHAR_EXCLAMATION_MARK:e,CHAR_FORWARD_SLASH:n,CHAR_LEFT_CURLY_BRACE:t,CHAR_LEFT_PARENTHESES:r,CHAR_LEFT_SQUARE_BRACKET:s,CHAR_PLUS:f,CHAR_QUESTION_MARK:a,CHAR_RIGHT_CURLY_BRACE:R,CHAR_RIGHT_PARENTHESES:x,CHAR_RIGHT_SQUARE_BRACKET:N}=ve(),$=m=>m===n||m===l,d=m=>{m.isPrefix!==!0&&(m.depth=m.isGlobstar?1/0:1)};return Ke=(m,O)=>{const g=O||{},E=m.length-1,A=g.parts===!0||g.scanToEnd===!0,w=[],o=[],u=[];let v=m,C=-1,y=0,k=0,I=!1,q=!1,G=!1,P=!1,Q=!1,M=!1,L=!1,re=!1,B=!1,ee=!1,T=0,S,X,W={value:"",depth:0,isGlob:!1};const ne=()=>C>=E,K=()=>v.charCodeAt(C+1),j=()=>(S=X,v.charCodeAt(++C));for(;C<E;){X=j();let U;if(X===l){L=W.backslashes=!0,X=j(),X===t&&(M=!0);continue}if(M===!0||X===t){for(T++;ne()!==!0&&(X=j());){if(X===l){L=W.backslashes=!0,j();continue}if(X===t){T++;continue}if(M!==!0&&X===i&&(X=j())===i){if(I=W.isBrace=!0,G=W.isGlob=!0,ee=!0,A===!0)continue;break}if(M!==!0&&X===p){if(I=W.isBrace=!0,G=W.isGlob=!0,ee=!0,A===!0)continue;break}if(X===R&&(T--,T===0)){M=!1,I=W.isBrace=!0,ee=!0;break}}if(A===!0)continue;break}if(X===n){if(w.push(C),o.push(W),W={value:"",depth:0,isGlob:!1},ee===!0)continue;if(S===i&&C===y+1){y+=2;continue}k=C+1;continue}if(g.noext!==!0&&(X===f||X===h||X===c||X===a||X===e)===!0&&K()===r){if(G=W.isGlob=!0,P=W.isExtglob=!0,ee=!0,X===e&&C===y&&(B=!0),A===!0){for(;ne()!==!0&&(X=j());){if(X===l){L=W.backslashes=!0,X=j();continue}if(X===x){G=W.isGlob=!0,ee=!0;break}}continue}break}if(X===c){if(S===c&&(Q=W.isGlobstar=!0),G=W.isGlob=!0,ee=!0,A===!0)continue;break}if(X===a){if(G=W.isGlob=!0,ee=!0,A===!0)continue;break}if(X===s){for(;ne()!==!0&&(U=j());){if(U===l){L=W.backslashes=!0,j();continue}if(U===N){q=W.isBracket=!0,G=W.isGlob=!0,ee=!0;break}}if(A===!0)continue;break}if(g.nonegate!==!0&&X===e&&C===y){re=W.negated=!0,y++;continue}if(g.noparen!==!0&&X===r){if(G=W.isGlob=!0,A===!0){for(;ne()!==!0&&(X=j());){if(X===r){L=W.backslashes=!0,X=j();continue}if(X===x){ee=!0;break}}continue}break}if(G===!0){if(ee=!0,A===!0)continue;break}}g.noext===!0&&(P=!1,G=!1);let Y=v,oe="",V="";y>0&&(oe=v.slice(0,y),v=v.slice(y),k-=y),Y&&G===!0&&k>0?(Y=v.slice(0,k),V=v.slice(k)):G===!0?(Y="",V=v):Y=v,Y&&Y!==""&&Y!=="/"&&Y!==v&&$(Y.charCodeAt(Y.length-1))&&(Y=Y.slice(0,-1)),g.unescape===!0&&(V&&(V=b.removeBackslashes(V)),Y&&L===!0&&(Y=b.removeBackslashes(Y)));const J={prefix:oe,input:m,start:y,base:Y,glob:V,isBrace:I,isBracket:q,isGlob:G,isExtglob:P,isGlobstar:Q,negated:re,negatedExtglob:B};if(g.tokens===!0&&(J.maxDepth=0,$(X)||o.push(W),J.tokens=o),g.parts===!0||g.tokens===!0){let U;for(let z=0;z<w.length;z++){const he=U?U+1:y,F=w[z],D=m.slice(he,F);g.tokens&&(z===0&&y!==0?(o[z].isPrefix=!0,o[z].value=oe):o[z].value=D,d(o[z]),J.maxDepth+=o[z].depth),(z!==0||D!=="")&&u.push(D),U=F}if(U&&U+1<m.length){const z=m.slice(U+1);u.push(z),g.tokens&&(o[o.length-1].value=z,d(o[o.length-1]),J.maxDepth+=o[o.length-1].depth)}J.slashes=w,J.parts=u}return J},Ke}var We,Ut;function Sr(){if(Ut)return We;Ut=1;const b=ve(),c=Ce(),{MAX_LENGTH:h,POSIX_REGEX_SOURCE:l,REGEX_NON_SPECIAL_CHARS:p,REGEX_SPECIAL_CHARS_BACKREF:i,REPLACEMENTS:e}=b,n=(s,f)=>{if(typeof f.expandRange=="function")return f.expandRange(...s,f);s.sort();const a=`[${s.join("-")}]`;try{new RegExp(a)}catch{return s.map(x=>c.escapeRegex(x)).join("..")}return a},t=(s,f)=>`Missing ${s}: "${f}" - use "\\\\${f}" to match literal characters`,r=(s,f)=>{if(typeof s!="string")throw new TypeError("Expected a string");s=e[s]||s;const a={...f},R=typeof a.maxLength=="number"?Math.min(h,a.maxLength):h;let x=s.length;if(x>R)throw new SyntaxError(`Input length: ${x}, exceeds maximum allowed length: ${R}`);const N={type:"bos",value:"",output:a.prepend||""},$=[N],d=a.capture?"":"?:",_=c.isWindows(f),m=b.globChars(_),O=b.extglobChars(m),{DOT_LITERAL:g,PLUS_LITERAL:E,SLASH_LITERAL:A,ONE_CHAR:w,DOTS_SLASH:o,NO_DOT:u,NO_DOT_SLASH:v,NO_DOTS_SLASH:C,QMARK:y,QMARK_NO_DOT:k,STAR:I,START_ANCHOR:q}=m,G=F=>`(${d}(?:(?!${q}${F.dot?o:g}).)*?)`,P=a.dot?"":u,Q=a.dot?y:k;let M=a.bash===!0?G(a):I;a.capture&&(M=`(${M})`),typeof a.noext=="boolean"&&(a.noextglob=a.noext);const L={input:s,index:-1,start:0,dot:a.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:$};s=c.removePrefix(s,L),x=s.length;const re=[],B=[],ee=[];let T=N,S;const X=()=>L.index===x-1,W=L.peek=(F=1)=>s[L.index+F],ne=L.advance=()=>s[++L.index]||"",K=()=>s.slice(L.index+1),j=(F="",D=0)=>{L.consumed+=F,L.index+=D},Y=F=>{L.output+=F.output!=null?F.output:F.value,j(F.value)},oe=()=>{let F=1;for(;W()==="!"&&(W(2)!=="("||W(3)==="?");)ne(),L.start++,F++;return F%2===0?!1:(L.negated=!0,L.start++,!0)},V=F=>{L[F]++,ee.push(F)},J=F=>{L[F]--,ee.pop()},U=F=>{if(T.type==="globstar"){const D=L.braces>0&&(F.type==="comma"||F.type==="brace"),H=F.extglob===!0||re.length&&(F.type==="pipe"||F.type==="paren");F.type!=="slash"&&F.type!=="paren"&&!D&&!H&&(L.output=L.output.slice(0,-T.output.length),T.type="star",T.value="*",T.output=M,L.output+=T.output)}if(re.length&&F.type!=="paren"&&(re[re.length-1].inner+=F.value),(F.value||F.output)&&Y(F),T&&T.type==="text"&&F.type==="text"){T.value+=F.value,T.output=(T.output||"")+F.value;return}F.prev=T,$.push(F),T=F},z=(F,D)=>{const H={...O[D],conditions:1,inner:""};H.prev=T,H.parens=L.parens,H.output=L.output;const Z=(a.capture?"(":"")+H.open;V("parens"),U({type:F,value:D,output:L.output?"":w}),U({type:"paren",extglob:!0,value:ne(),output:Z}),re.push(H)},he=F=>{let D=F.close+(a.capture?")":""),H;if(F.type==="negate"){let Z=M;if(F.inner&&F.inner.length>1&&F.inner.includes("/")&&(Z=G(a)),(Z!==M||X()||/^\)+$/.test(K()))&&(D=F.close=`)$))${Z}`),F.inner.includes("*")&&(H=K())&&/^\.[^\\/.]+$/.test(H)){const te=r(H,{...f,fastpaths:!1}).output;D=F.close=`)${te})${Z})`}F.prev.type==="bos"&&(L.negatedExtglob=!0)}U({type:"paren",extglob:!0,value:S,output:D}),J("parens")};if(a.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(s)){let F=!1,D=s.replace(i,(H,Z,te,se,ie,ue)=>se==="\\"?(F=!0,H):se==="?"?Z?Z+se+(ie?y.repeat(ie.length):""):ue===0?Q+(ie?y.repeat(ie.length):""):y.repeat(te.length):se==="."?g.repeat(te.length):se==="*"?Z?Z+se+(ie?M:""):M:Z?H:`\\${H}`);return F===!0&&(a.unescape===!0?D=D.replace(/\\/g,""):D=D.replace(/\\+/g,H=>H.length%2===0?"\\\\":H?"\\":"")),D===s&&a.contains===!0?(L.output=s,L):(L.output=c.wrapOutput(D,L,f),L)}for(;!X();){if(S=ne(),S==="\0")continue;if(S==="\\"){const H=W();if(H==="/"&&a.bash!==!0||H==="."||H===";")continue;if(!H){S+="\\",U({type:"text",value:S});continue}const Z=/^\\+/.exec(K());let te=0;if(Z&&Z[0].length>2&&(te=Z[0].length,L.index+=te,te%2!==0&&(S+="\\")),a.unescape===!0?S=ne():S+=ne(),L.brackets===0){U({type:"text",value:S});continue}}if(L.brackets>0&&(S!=="]"||T.value==="["||T.value==="[^")){if(a.posix!==!1&&S===":"){const H=T.value.slice(1);if(H.includes("[")&&(T.posix=!0,H.includes(":"))){const Z=T.value.lastIndexOf("["),te=T.value.slice(0,Z),se=T.value.slice(Z+2),ie=l[se];if(ie){T.value=te+ie,L.backtrack=!0,ne(),!N.output&&$.indexOf(T)===1&&(N.output=w);continue}}}(S==="["&&W()!==":"||S==="-"&&W()==="]")&&(S=`\\${S}`),S==="]"&&(T.value==="["||T.value==="[^")&&(S=`\\${S}`),a.posix===!0&&S==="!"&&T.value==="["&&(S="^"),T.value+=S,Y({value:S});continue}if(L.quotes===1&&S!=='"'){S=c.escapeRegex(S),T.value+=S,Y({value:S});continue}if(S==='"'){L.quotes=L.quotes===1?0:1,a.keepQuotes===!0&&U({type:"text",value:S});continue}if(S==="("){V("parens"),U({type:"paren",value:S});continue}if(S===")"){if(L.parens===0&&a.strictBrackets===!0)throw new SyntaxError(t("opening","("));const H=re[re.length-1];if(H&&L.parens===H.parens+1){he(re.pop());continue}U({type:"paren",value:S,output:L.parens?")":"\\)"}),J("parens");continue}if(S==="["){if(a.nobracket===!0||!K().includes("]")){if(a.nobracket!==!0&&a.strictBrackets===!0)throw new SyntaxError(t("closing","]"));S=`\\${S}`}else V("brackets");U({type:"bracket",value:S});continue}if(S==="]"){if(a.nobracket===!0||T&&T.type==="bracket"&&T.value.length===1){U({type:"text",value:S,output:`\\${S}`});continue}if(L.brackets===0){if(a.strictBrackets===!0)throw new SyntaxError(t("opening","["));U({type:"text",value:S,output:`\\${S}`});continue}J("brackets");const H=T.value.slice(1);if(T.posix!==!0&&H[0]==="^"&&!H.includes("/")&&(S=`/${S}`),T.value+=S,Y({value:S}),a.literalBrackets===!1||c.hasRegexChars(H))continue;const Z=c.escapeRegex(T.value);if(L.output=L.output.slice(0,-T.value.length),a.literalBrackets===!0){L.output+=Z,T.value=Z;continue}T.value=`(${d}${Z}|${T.value})`,L.output+=T.value;continue}if(S==="{"&&a.nobrace!==!0){V("braces");const H={type:"brace",value:S,output:"(",outputIndex:L.output.length,tokensIndex:L.tokens.length};B.push(H),U(H);continue}if(S==="}"){const H=B[B.length-1];if(a.nobrace===!0||!H){U({type:"text",value:S,output:S});continue}let Z=")";if(H.dots===!0){const te=$.slice(),se=[];for(let ie=te.length-1;ie>=0&&($.pop(),te[ie].type!=="brace");ie--)te[ie].type!=="dots"&&se.unshift(te[ie].value);Z=n(se,a),L.backtrack=!0}if(H.comma!==!0&&H.dots!==!0){const te=L.output.slice(0,H.outputIndex),se=L.tokens.slice(H.tokensIndex);H.value=H.output="\\{",S=Z="\\}",L.output=te;for(const ie of se)L.output+=ie.output||ie.value}U({type:"brace",value:S,output:Z}),J("braces"),B.pop();continue}if(S==="|"){re.length>0&&re[re.length-1].conditions++,U({type:"text",value:S});continue}if(S===","){let H=S;const Z=B[B.length-1];Z&&ee[ee.length-1]==="braces"&&(Z.comma=!0,H="|"),U({type:"comma",value:S,output:H});continue}if(S==="/"){if(T.type==="dot"&&L.index===L.start+1){L.start=L.index+1,L.consumed="",L.output="",$.pop(),T=N;continue}U({type:"slash",value:S,output:A});continue}if(S==="."){if(L.braces>0&&T.type==="dot"){T.value==="."&&(T.output=g);const H=B[B.length-1];T.type="dots",T.output+=S,T.value+=S,H.dots=!0;continue}if(L.braces+L.parens===0&&T.type!=="bos"&&T.type!=="slash"){U({type:"text",value:S,output:g});continue}U({type:"dot",value:S,output:g});continue}if(S==="?"){if(!(T&&T.value==="(")&&a.noextglob!==!0&&W()==="("&&W(2)!=="?"){z("qmark",S);continue}if(T&&T.type==="paren"){const Z=W();let te=S;if(Z==="<"&&!c.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(T.value==="("&&!/[!=<:]/.test(Z)||Z==="<"&&!/<([!=]|\w+>)/.test(K()))&&(te=`\\${S}`),U({type:"text",value:S,output:te});continue}if(a.dot!==!0&&(T.type==="slash"||T.type==="bos")){U({type:"qmark",value:S,output:k});continue}U({type:"qmark",value:S,output:y});continue}if(S==="!"){if(a.noextglob!==!0&&W()==="("&&(W(2)!=="?"||!/[!=<:]/.test(W(3)))){z("negate",S);continue}if(a.nonegate!==!0&&L.index===0){oe();continue}}if(S==="+"){if(a.noextglob!==!0&&W()==="("&&W(2)!=="?"){z("plus",S);continue}if(T&&T.value==="("||a.regex===!1){U({type:"plus",value:S,output:E});continue}if(T&&(T.type==="bracket"||T.type==="paren"||T.type==="brace")||L.parens>0){U({type:"plus",value:S});continue}U({type:"plus",value:E});continue}if(S==="@"){if(a.noextglob!==!0&&W()==="("&&W(2)!=="?"){U({type:"at",extglob:!0,value:S,output:""});continue}U({type:"text",value:S});continue}if(S!=="*"){(S==="$"||S==="^")&&(S=`\\${S}`);const H=p.exec(K());H&&(S+=H[0],L.index+=H[0].length),U({type:"text",value:S});continue}if(T&&(T.type==="globstar"||T.star===!0)){T.type="star",T.star=!0,T.value+=S,T.output=M,L.backtrack=!0,L.globstar=!0,j(S);continue}let F=K();if(a.noextglob!==!0&&/^\([^?]/.test(F)){z("star",S);continue}if(T.type==="star"){if(a.noglobstar===!0){j(S);continue}const H=T.prev,Z=H.prev,te=H.type==="slash"||H.type==="bos",se=Z&&(Z.type==="star"||Z.type==="globstar");if(a.bash===!0&&(!te||F[0]&&F[0]!=="/")){U({type:"star",value:S,output:""});continue}const ie=L.braces>0&&(H.type==="comma"||H.type==="brace"),ue=re.length&&(H.type==="pipe"||H.type==="paren");if(!te&&H.type!=="paren"&&!ie&&!ue){U({type:"star",value:S,output:""});continue}for(;F.slice(0,3)==="/**";){const fe=s[L.index+4];if(fe&&fe!=="/")break;F=F.slice(3),j("/**",3)}if(H.type==="bos"&&X()){T.type="globstar",T.value+=S,T.output=G(a),L.output=T.output,L.globstar=!0,j(S);continue}if(H.type==="slash"&&H.prev.type!=="bos"&&!se&&X()){L.output=L.output.slice(0,-(H.output+T.output).length),H.output=`(?:${H.output}`,T.type="globstar",T.output=G(a)+(a.strictSlashes?")":"|$)"),T.value+=S,L.globstar=!0,L.output+=H.output+T.output,j(S);continue}if(H.type==="slash"&&H.prev.type!=="bos"&&F[0]==="/"){const fe=F[1]!==void 0?"|$":"";L.output=L.output.slice(0,-(H.output+T.output).length),H.output=`(?:${H.output}`,T.type="globstar",T.output=`${G(a)}${A}|${A}${fe})`,T.value+=S,L.output+=H.output+T.output,L.globstar=!0,j(S+ne()),U({type:"slash",value:"/",output:""});continue}if(H.type==="bos"&&F[0]==="/"){T.type="globstar",T.value+=S,T.output=`(?:^|${A}|${G(a)}${A})`,L.output=T.output,L.globstar=!0,j(S+ne()),U({type:"slash",value:"/",output:""});continue}L.output=L.output.slice(0,-T.output.length),T.type="globstar",T.output=G(a),T.value+=S,L.output+=T.output,L.globstar=!0,j(S);continue}const D={type:"star",value:S,output:M};if(a.bash===!0){D.output=".*?",(T.type==="bos"||T.type==="slash")&&(D.output=P+D.output),U(D);continue}if(T&&(T.type==="bracket"||T.type==="paren")&&a.regex===!0){D.output=S,U(D);continue}(L.index===L.start||T.type==="slash"||T.type==="dot")&&(T.type==="dot"?(L.output+=v,T.output+=v):a.dot===!0?(L.output+=C,T.output+=C):(L.output+=P,T.output+=P),W()!=="*"&&(L.output+=w,T.output+=w)),U(D)}for(;L.brackets>0;){if(a.strictBrackets===!0)throw new SyntaxError(t("closing","]"));L.output=c.escapeLast(L.output,"["),J("brackets")}for(;L.parens>0;){if(a.strictBrackets===!0)throw new SyntaxError(t("closing",")"));L.output=c.escapeLast(L.output,"("),J("parens")}for(;L.braces>0;){if(a.strictBrackets===!0)throw new SyntaxError(t("closing","}"));L.output=c.escapeLast(L.output,"{"),J("braces")}if(a.strictSlashes!==!0&&(T.type==="star"||T.type==="bracket")&&U({type:"maybe_slash",value:"",output:`${A}?`}),L.backtrack===!0){L.output="";for(const F of L.tokens)L.output+=F.output!=null?F.output:F.value,F.suffix&&(L.output+=F.suffix)}return L};return r.fastpaths=(s,f)=>{const a={...f},R=typeof a.maxLength=="number"?Math.min(h,a.maxLength):h,x=s.length;if(x>R)throw new SyntaxError(`Input length: ${x}, exceeds maximum allowed length: ${R}`);s=e[s]||s;const N=c.isWindows(f),{DOT_LITERAL:$,SLASH_LITERAL:d,ONE_CHAR:_,DOTS_SLASH:m,NO_DOT:O,NO_DOTS:g,NO_DOTS_SLASH:E,STAR:A,START_ANCHOR:w}=b.globChars(N),o=a.dot?g:O,u=a.dot?E:O,v=a.capture?"":"?:",C={negated:!1,prefix:""};let y=a.bash===!0?".*?":A;a.capture&&(y=`(${y})`);const k=P=>P.noglobstar===!0?y:`(${v}(?:(?!${w}${P.dot?m:$}).)*?)`,I=P=>{switch(P){case"*":return`${o}${_}${y}`;case".*":return`${$}${_}${y}`;case"*.*":return`${o}${y}${$}${_}${y}`;case"*/*":return`${o}${y}${d}${_}${u}${y}`;case"**":return o+k(a);case"**/*":return`(?:${o}${k(a)}${d})?${u}${_}${y}`;case"**/*.*":return`(?:${o}${k(a)}${d})?${u}${y}${$}${_}${y}`;case"**/.*":return`(?:${o}${k(a)}${d})?${$}${_}${y}`;default:{const Q=/^(.*?)\.(\w+)$/.exec(P);if(!Q)return;const M=I(Q[1]);return M?M+$+Q[2]:void 0}}},q=c.removePrefix(s,C);let G=I(q);return G&&a.strictSlashes!==!0&&(G+=`${d}?`),G},We=r,We}var Xe,qt;function Tr(){if(qt)return Xe;qt=1;const b=qe(),c=Nr(),h=Sr(),l=Ce(),p=ve(),i=n=>n&&typeof n=="object"&&!Array.isArray(n),e=(n,t,r=!1)=>{if(Array.isArray(n)){const d=n.map(m=>e(m,t,r));return m=>{for(const O of d){const g=O(m);if(g)return g}return!1}}const s=i(n)&&n.tokens&&n.input;if(n===""||typeof n!="string"&&!s)throw new TypeError("Expected pattern to be a non-empty string");const f=t||{},a=l.isWindows(t),R=s?e.compileRe(n,t):e.makeRe(n,t,!1,!0),x=R.state;delete R.state;let N=()=>!1;if(f.ignore){const d={...t,ignore:null,onMatch:null,onResult:null};N=e(f.ignore,d,r)}const $=(d,_=!1)=>{const{isMatch:m,match:O,output:g}=e.test(d,R,t,{glob:n,posix:a}),E={glob:n,state:x,regex:R,posix:a,input:d,output:g,match:O,isMatch:m};return typeof f.onResult=="function"&&f.onResult(E),m===!1?(E.isMatch=!1,_?E:!1):N(d)?(typeof f.onIgnore=="function"&&f.onIgnore(E),E.isMatch=!1,_?E:!1):(typeof f.onMatch=="function"&&f.onMatch(E),_?E:!0)};return r&&($.state=x),$};return e.test=(n,t,r,{glob:s,posix:f}={})=>{if(typeof n!="string")throw new TypeError("Expected input to be a string");if(n==="")return{isMatch:!1,output:""};const a=r||{},R=a.format||(f?l.toPosixSlashes:null);let x=n===s,N=x&&R?R(n):n;return x===!1&&(N=R?R(n):n,x=N===s),(x===!1||a.capture===!0)&&(a.matchBase===!0||a.basename===!0?x=e.matchBase(n,t,r,f):x=t.exec(N)),{isMatch:!!x,match:x,output:N}},e.matchBase=(n,t,r,s=l.isWindows(r))=>(t instanceof RegExp?t:e.makeRe(t,r)).test(b.basename(n)),e.isMatch=(n,t,r)=>e(t,r)(n),e.parse=(n,t)=>Array.isArray(n)?n.map(r=>e.parse(r,t)):h(n,{...t,fastpaths:!1}),e.scan=(n,t)=>c(n,t),e.compileRe=(n,t,r=!1,s=!1)=>{if(r===!0)return n.output;const f=t||{},a=f.contains?"":"^",R=f.contains?"":"$";let x=`${a}(?:${n.output})${R}`;n&&n.negated===!0&&(x=`^(?!${x}).*$`);const N=e.toRegex(x,t);return s===!0&&(N.state=n),N},e.makeRe=(n,t={},r=!1,s=!1)=>{if(!n||typeof n!="string")throw new TypeError("Expected a non-empty string");let f={negated:!1,fastpaths:!0};return t.fastpaths!==!1&&(n[0]==="."||n[0]==="*")&&(f.output=h.fastpaths(n,t)),f.output||(f=h(n,t)),e.compileRe(f,t,r,s)},e.toRegex=(n,t)=>{try{const r=t||{};return new RegExp(n,r.flags||(r.nocase?"i":""))}catch(r){if(t&&t.debug===!0)throw r;return/$^/}},e.constants=p,Xe=e,Xe}var je,Gt;function Or(){return Gt||(Gt=1,je=Tr()),je}var Ve,zt;function Lr(){if(zt)return Ve;zt=1;const b=Ct,c=xr(),h=Or(),l=Ce(),p=n=>n===""||n==="./",i=n=>{const t=n.indexOf("{");return t>-1&&n.indexOf("}",t)>-1},e=(n,t,r)=>{t=[].concat(t),n=[].concat(n);let s=new Set,f=new Set,a=new Set,R=0,x=d=>{a.add(d.output),r&&r.onResult&&r.onResult(d)};for(let d=0;d<t.length;d++){let _=h(String(t[d]),{...r,onResult:x},!0),m=_.state.negated||_.state.negatedExtglob;m&&R++;for(let O of n){let g=_(O,!0);(m?!g.isMatch:g.isMatch)&&(m?s.add(g.output):(s.delete(g.output),f.add(g.output)))}}let $=(R===t.length?[...a]:[...f]).filter(d=>!s.has(d));if(r&&$.length===0){if(r.failglob===!0)throw new Error(`No matches found for "${t.join(", ")}"`);if(r.nonull===!0||r.nullglob===!0)return r.unescape?t.map(d=>d.replace(/\\/g,"")):t}return $};return e.match=e,e.matcher=(n,t)=>h(n,t),e.isMatch=(n,t,r)=>h(t,r)(n),e.any=e.isMatch,e.not=(n,t,r={})=>{t=[].concat(t).map(String);let s=new Set,f=[],a=x=>{r.onResult&&r.onResult(x),f.push(x.output)},R=new Set(e(n,t,{...r,onResult:a}));for(let x of f)R.has(x)||s.add(x);return[...s]},e.contains=(n,t,r)=>{if(typeof n!="string")throw new TypeError(`Expected a string: "${b.inspect(n)}"`);if(Array.isArray(t))return t.some(s=>e.contains(n,s,r));if(typeof t=="string"){if(p(n)||p(t))return!1;if(n.includes(t)||n.startsWith("./")&&n.slice(2).includes(t))return!0}return e.isMatch(n,t,{...r,contains:!0})},e.matchKeys=(n,t,r)=>{if(!l.isObject(n))throw new TypeError("Expected the first argument to be an object");let s=e(Object.keys(n),t,r),f={};for(let a of s)f[a]=n[a];return f},e.some=(n,t,r)=>{let s=[].concat(n);for(let f of[].concat(t)){let a=h(String(f),r);if(s.some(R=>a(R)))return!0}return!1},e.every=(n,t,r)=>{let s=[].concat(n);for(let f of[].concat(t)){let a=h(String(f),r);if(!s.every(R=>a(R)))return!1}return!0},e.all=(n,t,r)=>{if(typeof n!="string")throw new TypeError(`Expected a string: "${b.inspect(n)}"`);return[].concat(t).every(s=>h(s,r)(n))},e.capture=(n,t,r)=>{let s=l.isWindows(r),a=h.makeRe(String(n),{...r,capture:!0}).exec(s?l.toPosixSlashes(t):t);if(a)return a.slice(1).map(R=>R===void 0?"":R)},e.makeRe=(...n)=>h.makeRe(...n),e.scan=(...n)=>h.scan(...n),e.parse=(n,t)=>{let r=[];for(let s of[].concat(n||[]))for(let f of c(String(s),t))r.push(h.parse(f,t));return r},e.braces=(n,t)=>{if(typeof n!="string")throw new TypeError("Expected a string");return t&&t.nobrace===!0||!i(n)?[n]:c(n,t)},e.braceExpand=(n,t)=>{if(typeof n!="string")throw new TypeError("Expected a string");return e.braces(n,{...t,expand:!0})},e.hasBraces=i,Ve=e,Ve}var $r=Lr(),ye=Ne($r),Ze,Kt;function Ir(){return Kt||(Kt=1,Ze=function b(c,h){var l=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,p=/(^[ ]*|[ ]*$)/g,i=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,e=/^0x[0-9a-f]+$/i,n=/^0/,t=function(m){return b.insensitive&&(""+m).toLowerCase()||""+m},r=t(c).replace(p,"")||"",s=t(h).replace(p,"")||"",f=r.replace(l,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),a=s.replace(l,"\0$1\0").replace(/\0$/,"").replace(/^\0/,"").split("\0"),R=parseInt(r.match(e),16)||f.length!==1&&r.match(i)&&Date.parse(r),x=parseInt(s.match(e),16)||R&&s.match(i)&&Date.parse(s)||null,N,$;if(x){if(R<x)return-1;if(R>x)return 1}for(var d=0,_=Math.max(f.length,a.length);d<_;d++){if(N=!(f[d]||"").match(n)&&parseFloat(f[d])||f[d]||0,$=!(a[d]||"").match(n)&&parseFloat(a[d])||a[d]||0,isNaN(N)!==isNaN($))return isNaN(N)?1:-1;if(typeof N!=typeof $&&(N+="",$+=""),N<$)return-1;if(N>$)return 1}return 0}),Ze}var kr=Ir(),Qe=Ne(kr),Ye={},Je={},Wt;function De(){return Wt||(Wt=1,(function(b){const c=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",h=c+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",l="["+c+"]["+h+"]*",p=new RegExp("^"+l+"$"),i=function(n,t){const r=[];let s=t.exec(n);for(;s;){const f=[];f.startIndex=t.lastIndex-s[0].length;const a=s.length;for(let R=0;R<a;R++)f.push(s[R]);r.push(f),s=t.exec(n)}return r},e=function(n){const t=p.exec(n);return!(t===null||typeof t>"u")};b.isExist=function(n){return typeof n<"u"},b.isEmptyObject=function(n){return Object.keys(n).length===0},b.merge=function(n,t,r){if(t){const s=Object.keys(t),f=s.length;for(let a=0;a<f;a++)r==="strict"?n[s[a]]=[t[s[a]]]:n[s[a]]=t[s[a]]}},b.getValue=function(n){return b.isExist(n)?n:""},b.isName=e,b.getAllMatches=i,b.nameRegexp=l})(Je)),Je}var Xt;function jt(){if(Xt)return Ye;Xt=1;const b=De(),c={allowBooleanAttributes:!1,unpairedTags:[]};Ye.validate=function(d,_){_=Object.assign({},c,_);const m=[];let O=!1,g=!1;d[0]==="\uFEFF"&&(d=d.substr(1));for(let E=0;E<d.length;E++)if(d[E]==="<"&&d[E+1]==="?"){if(E+=2,E=l(d,E),E.err)return E}else if(d[E]==="<"){let A=E;if(E++,d[E]==="!"){E=p(d,E);continue}else{let w=!1;d[E]==="/"&&(w=!0,E++);let o="";for(;E<d.length&&d[E]!==">"&&d[E]!==" "&&d[E]!=="	"&&d[E]!==`
`&&d[E]!=="\r";E++)o+=d[E];if(o=o.trim(),o[o.length-1]==="/"&&(o=o.substring(0,o.length-1),E--),!x(o)){let C;return o.trim().length===0?C="Invalid space after '<'.":C="Tag '"+o+"' is an invalid name.",a("InvalidTag",C,N(d,E))}const u=n(d,E);if(u===!1)return a("InvalidAttr","Attributes for '"+o+"' have open quote.",N(d,E));let v=u.value;if(E=u.index,v[v.length-1]==="/"){const C=E-v.length;v=v.substring(0,v.length-1);const y=r(v,_);if(y===!0)O=!0;else return a(y.err.code,y.err.msg,N(d,C+y.err.line))}else if(w)if(u.tagClosed){if(v.trim().length>0)return a("InvalidTag","Closing tag '"+o+"' can't have attributes or invalid starting.",N(d,A));if(m.length===0)return a("InvalidTag","Closing tag '"+o+"' has not been opened.",N(d,A));{const C=m.pop();if(o!==C.tagName){let y=N(d,C.tagStartPos);return a("InvalidTag","Expected closing tag '"+C.tagName+"' (opened in line "+y.line+", col "+y.col+") instead of closing tag '"+o+"'.",N(d,A))}m.length==0&&(g=!0)}}else return a("InvalidTag","Closing tag '"+o+"' doesn't have proper closing.",N(d,E));else{const C=r(v,_);if(C!==!0)return a(C.err.code,C.err.msg,N(d,E-v.length+C.err.line));if(g===!0)return a("InvalidXml","Multiple possible root nodes found.",N(d,E));_.unpairedTags.indexOf(o)!==-1||m.push({tagName:o,tagStartPos:A}),O=!0}for(E++;E<d.length;E++)if(d[E]==="<")if(d[E+1]==="!"){E++,E=p(d,E);continue}else if(d[E+1]==="?"){if(E=l(d,++E),E.err)return E}else break;else if(d[E]==="&"){const C=f(d,E);if(C==-1)return a("InvalidChar","char '&' is not expected.",N(d,E));E=C}else if(g===!0&&!h(d[E]))return a("InvalidXml","Extra text at the end",N(d,E));d[E]==="<"&&E--}}else{if(h(d[E]))continue;return a("InvalidChar","char '"+d[E]+"' is not expected.",N(d,E))}if(O){if(m.length==1)return a("InvalidTag","Unclosed tag '"+m[0].tagName+"'.",N(d,m[0].tagStartPos));if(m.length>0)return a("InvalidXml","Invalid '"+JSON.stringify(m.map(E=>E.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return a("InvalidXml","Start tag expected.",1);return!0};function h(d){return d===" "||d==="	"||d===`
`||d==="\r"}function l(d,_){const m=_;for(;_<d.length;_++)if(d[_]=="?"||d[_]==" "){const O=d.substr(m,_-m);if(_>5&&O==="xml")return a("InvalidXml","XML declaration allowed only at the start of the document.",N(d,_));if(d[_]=="?"&&d[_+1]==">"){_++;break}else continue}return _}function p(d,_){if(d.length>_+5&&d[_+1]==="-"&&d[_+2]==="-"){for(_+=3;_<d.length;_++)if(d[_]==="-"&&d[_+1]==="-"&&d[_+2]===">"){_+=2;break}}else if(d.length>_+8&&d[_+1]==="D"&&d[_+2]==="O"&&d[_+3]==="C"&&d[_+4]==="T"&&d[_+5]==="Y"&&d[_+6]==="P"&&d[_+7]==="E"){let m=1;for(_+=8;_<d.length;_++)if(d[_]==="<")m++;else if(d[_]===">"&&(m--,m===0))break}else if(d.length>_+9&&d[_+1]==="["&&d[_+2]==="C"&&d[_+3]==="D"&&d[_+4]==="A"&&d[_+5]==="T"&&d[_+6]==="A"&&d[_+7]==="["){for(_+=8;_<d.length;_++)if(d[_]==="]"&&d[_+1]==="]"&&d[_+2]===">"){_+=2;break}}return _}const i='"',e="'";function n(d,_){let m="",O="",g=!1;for(;_<d.length;_++){if(d[_]===i||d[_]===e)O===""?O=d[_]:O!==d[_]||(O="");else if(d[_]===">"&&O===""){g=!0;break}m+=d[_]}return O!==""?!1:{value:m,index:_,tagClosed:g}}const t=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function r(d,_){const m=b.getAllMatches(d,t),O={};for(let g=0;g<m.length;g++){if(m[g][1].length===0)return a("InvalidAttr","Attribute '"+m[g][2]+"' has no space in starting.",$(m[g]));if(m[g][3]!==void 0&&m[g][4]===void 0)return a("InvalidAttr","Attribute '"+m[g][2]+"' is without value.",$(m[g]));if(m[g][3]===void 0&&!_.allowBooleanAttributes)return a("InvalidAttr","boolean attribute '"+m[g][2]+"' is not allowed.",$(m[g]));const E=m[g][2];if(!R(E))return a("InvalidAttr","Attribute '"+E+"' is an invalid name.",$(m[g]));if(!O.hasOwnProperty(E))O[E]=1;else return a("InvalidAttr","Attribute '"+E+"' is repeated.",$(m[g]))}return!0}function s(d,_){let m=/\d/;for(d[_]==="x"&&(_++,m=/[\da-fA-F]/);_<d.length;_++){if(d[_]===";")return _;if(!d[_].match(m))break}return-1}function f(d,_){if(_++,d[_]===";")return-1;if(d[_]==="#")return _++,s(d,_);let m=0;for(;_<d.length;_++,m++)if(!(d[_].match(/\w/)&&m<20)){if(d[_]===";")break;return-1}return _}function a(d,_,m){return{err:{code:d,msg:_,line:m.line||m,col:m.col}}}function R(d){return b.isName(d)}function x(d){return b.isName(d)}function N(d,_){const m=d.substring(0,_).split(/\r?\n/);return{line:m.length,col:m[m.length-1].length+1}}function $(d){return d.startIndex+d[1].length}return Ye}var we={},Vt;function Hr(){if(Vt)return we;Vt=1;const b={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(h,l){return l},attributeValueProcessor:function(h,l){return l},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(h,l,p){return h}},c=function(h){return Object.assign({},b,h)};return we.buildOptions=c,we.defaultOptions=b,we}var et,Zt;function Pr(){if(Zt)return et;Zt=1;class b{constructor(h){this.tagname=h,this.child=[],this[":@"]={}}add(h,l){h==="__proto__"&&(h="#__proto__"),this.child.push({[h]:l})}addChild(h){h.tagname==="__proto__"&&(h.tagname="#__proto__"),h[":@"]&&Object.keys(h[":@"]).length>0?this.child.push({[h.tagname]:h.child,":@":h[":@"]}):this.child.push({[h.tagname]:h.child})}}return et=b,et}var tt,Qt;function Fr(){if(Qt)return tt;Qt=1;const b=De();function c(r,s){const f={};if(r[s+3]==="O"&&r[s+4]==="C"&&r[s+5]==="T"&&r[s+6]==="Y"&&r[s+7]==="P"&&r[s+8]==="E"){s=s+9;let a=1,R=!1,x=!1,N="";for(;s<r.length;s++)if(r[s]==="<"&&!x){if(R&&p(r,s)){s+=7;let $,d;[$,d,s]=h(r,s+1),d.indexOf("&")===-1&&(f[t($)]={regx:RegExp(`&${$};`,"g"),val:d})}else if(R&&i(r,s))s+=8;else if(R&&e(r,s))s+=8;else if(R&&n(r,s))s+=9;else if(l)x=!0;else throw new Error("Invalid DOCTYPE");a++,N=""}else if(r[s]===">"){if(x?r[s-1]==="-"&&r[s-2]==="-"&&(x=!1,a--):a--,a===0)break}else r[s]==="["?R=!0:N+=r[s];if(a!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:f,i:s}}function h(r,s){let f="";for(;s<r.length&&r[s]!=="'"&&r[s]!=='"';s++)f+=r[s];if(f=f.trim(),f.indexOf(" ")!==-1)throw new Error("External entites are not supported");const a=r[s++];let R="";for(;s<r.length&&r[s]!==a;s++)R+=r[s];return[f,R,s]}function l(r,s){return r[s+1]==="!"&&r[s+2]==="-"&&r[s+3]==="-"}function p(r,s){return r[s+1]==="!"&&r[s+2]==="E"&&r[s+3]==="N"&&r[s+4]==="T"&&r[s+5]==="I"&&r[s+6]==="T"&&r[s+7]==="Y"}function i(r,s){return r[s+1]==="!"&&r[s+2]==="E"&&r[s+3]==="L"&&r[s+4]==="E"&&r[s+5]==="M"&&r[s+6]==="E"&&r[s+7]==="N"&&r[s+8]==="T"}function e(r,s){return r[s+1]==="!"&&r[s+2]==="A"&&r[s+3]==="T"&&r[s+4]==="T"&&r[s+5]==="L"&&r[s+6]==="I"&&r[s+7]==="S"&&r[s+8]==="T"}function n(r,s){return r[s+1]==="!"&&r[s+2]==="N"&&r[s+3]==="O"&&r[s+4]==="T"&&r[s+5]==="A"&&r[s+6]==="T"&&r[s+7]==="I"&&r[s+8]==="O"&&r[s+9]==="N"}function t(r){if(b.isName(r))return r;throw new Error(`Invalid entity name ${r}`)}return tt=c,tt}var rt,Yt;function Br(){if(Yt)return rt;Yt=1;const b=/^[-+]?0x[a-fA-F0-9]+$/,c=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,h={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function l(e,n={}){if(n=Object.assign({},h,n),!e||typeof e!="string")return e;let t=e.trim();if(n.skipLike!==void 0&&n.skipLike.test(t))return e;if(e==="0")return 0;if(n.hex&&b.test(t))return i(t,16);if(t.search(/[eE]/)!==-1){const r=t.match(/^([-\+])?(0*)([0-9]*(\.[0-9]*)?[eE][-\+]?[0-9]+)$/);if(r){if(n.leadingZeros)t=(r[1]||"")+r[3];else if(!(r[2]==="0"&&r[3][0]==="."))return e;return n.eNotation?Number(t):e}else return e}else{const r=c.exec(t);if(r){const s=r[1],f=r[2];let a=p(r[3]);if(!n.leadingZeros&&f.length>0&&s&&t[2]!==".")return e;if(!n.leadingZeros&&f.length>0&&!s&&t[1]!==".")return e;if(n.leadingZeros&&f===e)return 0;{const R=Number(t),x=""+R;return x.search(/[eE]/)!==-1?n.eNotation?R:e:t.indexOf(".")!==-1?x==="0"&&a===""||x===a||s&&x==="-"+a?R:e:f?a===x||s+a===x?R:e:t===x||t===s+x?R:e}}else return e}}function p(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}function i(e,n){if(parseInt)return parseInt(e,n);if(Number.parseInt)return Number.parseInt(e,n);if(window&&window.parseInt)return window.parseInt(e,n);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}return rt=l,rt}var nt,Jt;function Dt(){if(Jt)return nt;Jt=1;function b(c){return typeof c=="function"?c:Array.isArray(c)?h=>{for(const l of c)if(typeof l=="string"&&h===l||l instanceof RegExp&&l.test(h))return!0}:()=>!1}return nt=b,nt}var st,er;function Mr(){if(er)return st;er=1;const b=De(),c=Pr(),h=Fr(),l=Br(),p=Dt();class i{constructor(E){this.options=E,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"Â¢"},pound:{regex:/&(pound|#163);/g,val:"Â£"},yen:{regex:/&(yen|#165);/g,val:"Â¥"},euro:{regex:/&(euro|#8364);/g,val:"â¬"},copyright:{regex:/&(copy|#169);/g,val:"Â©"},reg:{regex:/&(reg|#174);/g,val:"Â®"},inr:{regex:/&(inr|#8377);/g,val:"â¹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(A,w)=>String.fromCharCode(Number.parseInt(w,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(A,w)=>String.fromCharCode(Number.parseInt(w,16))}},this.addExternalEntities=e,this.parseXml=f,this.parseTextData=n,this.resolveNameSpace=t,this.buildAttributesMap=s,this.isItStopNode=N,this.replaceEntitiesValue=R,this.readStopNodeData=m,this.saveTextToParentTag=x,this.addChild=a,this.ignoreAttributesFn=p(this.options.ignoreAttributes)}}function e(g){const E=Object.keys(g);for(let A=0;A<E.length;A++){const w=E[A];this.lastEntities[w]={regex:new RegExp("&"+w+";","g"),val:g[w]}}}function n(g,E,A,w,o,u,v){if(g!==void 0&&(this.options.trimValues&&!w&&(g=g.trim()),g.length>0)){v||(g=this.replaceEntitiesValue(g));const C=this.options.tagValueProcessor(E,g,A,o,u);return C==null?g:typeof C!=typeof g||C!==g?C:this.options.trimValues?O(g,this.options.parseTagValue,this.options.numberParseOptions):g.trim()===g?O(g,this.options.parseTagValue,this.options.numberParseOptions):g}}function t(g){if(this.options.removeNSPrefix){const E=g.split(":"),A=g.charAt(0)==="/"?"/":"";if(E[0]==="xmlns")return"";E.length===2&&(g=A+E[1])}return g}const r=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function s(g,E,A){if(this.options.ignoreAttributes!==!0&&typeof g=="string"){const w=b.getAllMatches(g,r),o=w.length,u={};for(let v=0;v<o;v++){const C=this.resolveNameSpace(w[v][1]);if(this.ignoreAttributesFn(C,E))continue;let y=w[v][4],k=this.options.attributeNamePrefix+C;if(C.length)if(this.options.transformAttributeName&&(k=this.options.transformAttributeName(k)),k==="__proto__"&&(k="#__proto__"),y!==void 0){this.options.trimValues&&(y=y.trim()),y=this.replaceEntitiesValue(y);const I=this.options.attributeValueProcessor(C,y,E);I==null?u[k]=y:typeof I!=typeof y||I!==y?u[k]=I:u[k]=O(y,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(u[k]=!0)}if(!Object.keys(u).length)return;if(this.options.attributesGroupName){const v={};return v[this.options.attributesGroupName]=u,v}return u}}const f=function(g){g=g.replace(/\r\n?/g,`
`);const E=new c("!xml");let A=E,w="",o="";for(let u=0;u<g.length;u++)if(g[u]==="<")if(g[u+1]==="/"){const C=d(g,">",u,"Closing Tag is not closed.");let y=g.substring(u+2,C).trim();if(this.options.removeNSPrefix){const q=y.indexOf(":");q!==-1&&(y=y.substr(q+1))}this.options.transformTagName&&(y=this.options.transformTagName(y)),A&&(w=this.saveTextToParentTag(w,A,o));const k=o.substring(o.lastIndexOf(".")+1);if(y&&this.options.unpairedTags.indexOf(y)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${y}>`);let I=0;k&&this.options.unpairedTags.indexOf(k)!==-1?(I=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):I=o.lastIndexOf("."),o=o.substring(0,I),A=this.tagsNodeStack.pop(),w="",u=C}else if(g[u+1]==="?"){let C=_(g,u,!1,"?>");if(!C)throw new Error("Pi Tag is not closed.");if(w=this.saveTextToParentTag(w,A,o),!(this.options.ignoreDeclaration&&C.tagName==="?xml"||this.options.ignorePiTags)){const y=new c(C.tagName);y.add(this.options.textNodeName,""),C.tagName!==C.tagExp&&C.attrExpPresent&&(y[":@"]=this.buildAttributesMap(C.tagExp,o,C.tagName)),this.addChild(A,y,o)}u=C.closeIndex+1}else if(g.substr(u+1,3)==="!--"){const C=d(g,"-->",u+4,"Comment is not closed.");if(this.options.commentPropName){const y=g.substring(u+4,C-2);w=this.saveTextToParentTag(w,A,o),A.add(this.options.commentPropName,[{[this.options.textNodeName]:y}])}u=C}else if(g.substr(u+1,2)==="!D"){const C=h(g,u);this.docTypeEntities=C.entities,u=C.i}else if(g.substr(u+1,2)==="!["){const C=d(g,"]]>",u,"CDATA is not closed.")-2,y=g.substring(u+9,C);w=this.saveTextToParentTag(w,A,o);let k=this.parseTextData(y,A.tagname,o,!0,!1,!0,!0);k==null&&(k=""),this.options.cdataPropName?A.add(this.options.cdataPropName,[{[this.options.textNodeName]:y}]):A.add(this.options.textNodeName,k),u=C+2}else{let C=_(g,u,this.options.removeNSPrefix),y=C.tagName;const k=C.rawTagName;let I=C.tagExp,q=C.attrExpPresent,G=C.closeIndex;this.options.transformTagName&&(y=this.options.transformTagName(y)),A&&w&&A.tagname!=="!xml"&&(w=this.saveTextToParentTag(w,A,o,!1));const P=A;if(P&&this.options.unpairedTags.indexOf(P.tagname)!==-1&&(A=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),y!==E.tagname&&(o+=o?"."+y:y),this.isItStopNode(this.options.stopNodes,o,y)){let Q="";if(I.length>0&&I.lastIndexOf("/")===I.length-1)y[y.length-1]==="/"?(y=y.substr(0,y.length-1),o=o.substr(0,o.length-1),I=y):I=I.substr(0,I.length-1),u=C.closeIndex;else if(this.options.unpairedTags.indexOf(y)!==-1)u=C.closeIndex;else{const L=this.readStopNodeData(g,k,G+1);if(!L)throw new Error(`Unexpected end of ${k}`);u=L.i,Q=L.tagContent}const M=new c(y);y!==I&&q&&(M[":@"]=this.buildAttributesMap(I,o,y)),Q&&(Q=this.parseTextData(Q,y,o,!0,q,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),M.add(this.options.textNodeName,Q),this.addChild(A,M,o)}else{if(I.length>0&&I.lastIndexOf("/")===I.length-1){y[y.length-1]==="/"?(y=y.substr(0,y.length-1),o=o.substr(0,o.length-1),I=y):I=I.substr(0,I.length-1),this.options.transformTagName&&(y=this.options.transformTagName(y));const Q=new c(y);y!==I&&q&&(Q[":@"]=this.buildAttributesMap(I,o,y)),this.addChild(A,Q,o),o=o.substr(0,o.lastIndexOf("."))}else{const Q=new c(y);this.tagsNodeStack.push(A),y!==I&&q&&(Q[":@"]=this.buildAttributesMap(I,o,y)),this.addChild(A,Q,o),A=Q}w="",u=G}}else w+=g[u];return E.child};function a(g,E,A){const w=this.options.updateTag(E.tagname,A,E[":@"]);w===!1||(typeof w=="string"&&(E.tagname=w),g.addChild(E))}const R=function(g){if(this.options.processEntities){for(let E in this.docTypeEntities){const A=this.docTypeEntities[E];g=g.replace(A.regx,A.val)}for(let E in this.lastEntities){const A=this.lastEntities[E];g=g.replace(A.regex,A.val)}if(this.options.htmlEntities)for(let E in this.htmlEntities){const A=this.htmlEntities[E];g=g.replace(A.regex,A.val)}g=g.replace(this.ampEntity.regex,this.ampEntity.val)}return g};function x(g,E,A,w){return g&&(w===void 0&&(w=E.child.length===0),g=this.parseTextData(g,E.tagname,A,!1,E[":@"]?Object.keys(E[":@"]).length!==0:!1,w),g!==void 0&&g!==""&&E.add(this.options.textNodeName,g),g=""),g}function N(g,E,A){const w="*."+A;for(const o in g){const u=g[o];if(w===u||E===u)return!0}return!1}function $(g,E,A=">"){let w,o="";for(let u=E;u<g.length;u++){let v=g[u];if(w)v===w&&(w="");else if(v==='"'||v==="'")w=v;else if(v===A[0])if(A[1]){if(g[u+1]===A[1])return{data:o,index:u}}else return{data:o,index:u};else v==="	"&&(v=" ");o+=v}}function d(g,E,A,w){const o=g.indexOf(E,A);if(o===-1)throw new Error(w);return o+E.length-1}function _(g,E,A,w=">"){const o=$(g,E+1,w);if(!o)return;let u=o.data;const v=o.index,C=u.search(/\s/);let y=u,k=!0;C!==-1&&(y=u.substring(0,C),u=u.substring(C+1).trimStart());const I=y;if(A){const q=y.indexOf(":");q!==-1&&(y=y.substr(q+1),k=y!==o.data.substr(q+1))}return{tagName:y,tagExp:u,closeIndex:v,attrExpPresent:k,rawTagName:I}}function m(g,E,A){const w=A;let o=1;for(;A<g.length;A++)if(g[A]==="<")if(g[A+1]==="/"){const u=d(g,">",A,`${E} is not closed`);if(g.substring(A+2,u).trim()===E&&(o--,o===0))return{tagContent:g.substring(w,A),i:u};A=u}else if(g[A+1]==="?")A=d(g,"?>",A+1,"StopNode is not closed.");else if(g.substr(A+1,3)==="!--")A=d(g,"-->",A+3,"StopNode is not closed.");else if(g.substr(A+1,2)==="![")A=d(g,"]]>",A,"StopNode is not closed.")-2;else{const u=_(g,A,">");u&&((u&&u.tagName)===E&&u.tagExp[u.tagExp.length-1]!=="/"&&o++,A=u.closeIndex)}}function O(g,E,A){if(E&&typeof g=="string"){const w=g.trim();return w==="true"?!0:w==="false"?!1:l(g,A)}else return b.isExist(g)?g:""}return st=i,st}var it={},tr;function Ur(){if(tr)return it;tr=1;function b(i,e){return c(i,e)}function c(i,e,n){let t;const r={};for(let s=0;s<i.length;s++){const f=i[s],a=h(f);let R="";if(n===void 0?R=a:R=n+"."+a,a===e.textNodeName)t===void 0?t=f[a]:t+=""+f[a];else{if(a===void 0)continue;if(f[a]){let x=c(f[a],e,R);const N=p(x,e);f[":@"]?l(x,f[":@"],R,e):Object.keys(x).length===1&&x[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?x=x[e.textNodeName]:Object.keys(x).length===0&&(e.alwaysCreateTextNode?x[e.textNodeName]="":x=""),r[a]!==void 0&&r.hasOwnProperty(a)?(Array.isArray(r[a])||(r[a]=[r[a]]),r[a].push(x)):e.isArray(a,R,N)?r[a]=[x]:r[a]=x}}}return typeof t=="string"?t.length>0&&(r[e.textNodeName]=t):t!==void 0&&(r[e.textNodeName]=t),r}function h(i){const e=Object.keys(i);for(let n=0;n<e.length;n++){const t=e[n];if(t!==":@")return t}}function l(i,e,n,t){if(e){const r=Object.keys(e),s=r.length;for(let f=0;f<s;f++){const a=r[f];t.isArray(a,n+"."+a,!0,!0)?i[a]=[e[a]]:i[a]=e[a]}}}function p(i,e){const{textNodeName:n}=e,t=Object.keys(i).length;return!!(t===0||t===1&&(i[n]||typeof i[n]=="boolean"||i[n]===0))}return it.prettify=b,it}var ot,rr;function qr(){if(rr)return ot;rr=1;const{buildOptions:b}=Hr(),c=Mr(),{prettify:h}=Ur(),l=jt();class p{constructor(e){this.externalEntities={},this.options=b(e)}parse(e,n){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(n){n===!0&&(n={});const s=l.validate(e,n);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const t=new c(this.options);t.addExternalEntities(this.externalEntities);const r=t.parseXml(e);return this.options.preserveOrder||r===void 0?r:h(r,this.options)}addEntity(e,n){if(n.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(n==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=n}}return ot=p,ot}var at,nr;function Gr(){if(nr)return at;nr=1;const b=`
`;function c(n,t){let r="";return t.format&&t.indentBy.length>0&&(r=b),h(n,t,"",r)}function h(n,t,r,s){let f="",a=!1;for(let R=0;R<n.length;R++){const x=n[R],N=l(x);if(N===void 0)continue;let $="";if(r.length===0?$=N:$=`${r}.${N}`,N===t.textNodeName){let g=x[N];i($,t)||(g=t.tagValueProcessor(N,g),g=e(g,t)),a&&(f+=s),f+=g,a=!1;continue}else if(N===t.cdataPropName){a&&(f+=s),f+=`<![CDATA[${x[N][0][t.textNodeName]}]]>`,a=!1;continue}else if(N===t.commentPropName){f+=s+`<!--${x[N][0][t.textNodeName]}-->`,a=!0;continue}else if(N[0]==="?"){const g=p(x[":@"],t),E=N==="?xml"?"":s;let A=x[N][0][t.textNodeName];A=A.length!==0?" "+A:"",f+=E+`<${N}${A}${g}?>`,a=!0;continue}let d=s;d!==""&&(d+=t.indentBy);const _=p(x[":@"],t),m=s+`<${N}${_}`,O=h(x[N],t,$,d);t.unpairedTags.indexOf(N)!==-1?t.suppressUnpairedNode?f+=m+">":f+=m+"/>":(!O||O.length===0)&&t.suppressEmptyNode?f+=m+"/>":O&&O.endsWith(">")?f+=m+`>${O}${s}</${N}>`:(f+=m+">",O&&s!==""&&(O.includes("/>")||O.includes("</"))?f+=s+t.indentBy+O+s:f+=O,f+=`</${N}>`),a=!0}return f}function l(n){const t=Object.keys(n);for(let r=0;r<t.length;r++){const s=t[r];if(n.hasOwnProperty(s)&&s!==":@")return s}}function p(n,t){let r="";if(n&&!t.ignoreAttributes)for(let s in n){if(!n.hasOwnProperty(s))continue;let f=t.attributeValueProcessor(s,n[s]);f=e(f,t),f===!0&&t.suppressBooleanAttributes?r+=` ${s.substr(t.attributeNamePrefix.length)}`:r+=` ${s.substr(t.attributeNamePrefix.length)}="${f}"`}return r}function i(n,t){n=n.substr(0,n.length-t.textNodeName.length-1);let r=n.substr(n.lastIndexOf(".")+1);for(let s in t.stopNodes)if(t.stopNodes[s]===n||t.stopNodes[s]==="*."+r)return!0;return!1}function e(n,t){if(n&&n.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){const s=t.entities[r];n=n.replace(s.regex,s.val)}return n}return at=c,at}var ut,sr;function zr(){if(sr)return ut;sr=1;const b=Gr(),c=Dt(),h={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(n,t){return t},attributeValueProcessor:function(n,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function l(n){this.options=Object.assign({},h,n),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=c(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=e),this.processTextOrObjNode=p,this.options.format?(this.indentate=i,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}l.prototype.build=function(n){return this.options.preserveOrder?b(n,this.options):(Array.isArray(n)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(n={[this.options.arrayNodeName]:n}),this.j2x(n,0,[]).val)},l.prototype.j2x=function(n,t,r){let s="",f="";const a=r.join(".");for(let R in n)if(Object.prototype.hasOwnProperty.call(n,R))if(typeof n[R]>"u")this.isAttribute(R)&&(f+="");else if(n[R]===null)this.isAttribute(R)||R===this.options.cdataPropName?f+="":R[0]==="?"?f+=this.indentate(t)+"<"+R+"?"+this.tagEndChar:f+=this.indentate(t)+"<"+R+"/"+this.tagEndChar;else if(n[R]instanceof Date)f+=this.buildTextValNode(n[R],R,"",t);else if(typeof n[R]!="object"){const x=this.isAttribute(R);if(x&&!this.ignoreAttributesFn(x,a))s+=this.buildAttrPairStr(x,""+n[R]);else if(!x)if(R===this.options.textNodeName){let N=this.options.tagValueProcessor(R,""+n[R]);f+=this.replaceEntitiesValue(N)}else f+=this.buildTextValNode(n[R],R,"",t)}else if(Array.isArray(n[R])){const x=n[R].length;let N="",$="";for(let d=0;d<x;d++){const _=n[R][d];if(!(typeof _>"u"))if(_===null)R[0]==="?"?f+=this.indentate(t)+"<"+R+"?"+this.tagEndChar:f+=this.indentate(t)+"<"+R+"/"+this.tagEndChar;else if(typeof _=="object")if(this.options.oneListGroup){const m=this.j2x(_,t+1,r.concat(R));N+=m.val,this.options.attributesGroupName&&_.hasOwnProperty(this.options.attributesGroupName)&&($+=m.attrStr)}else N+=this.processTextOrObjNode(_,R,t,r);else if(this.options.oneListGroup){let m=this.options.tagValueProcessor(R,_);m=this.replaceEntitiesValue(m),N+=m}else N+=this.buildTextValNode(_,R,"",t)}this.options.oneListGroup&&(N=this.buildObjectNode(N,R,$,t)),f+=N}else if(this.options.attributesGroupName&&R===this.options.attributesGroupName){const x=Object.keys(n[R]),N=x.length;for(let $=0;$<N;$++)s+=this.buildAttrPairStr(x[$],""+n[R][x[$]])}else f+=this.processTextOrObjNode(n[R],R,t,r);return{attrStr:s,val:f}},l.prototype.buildAttrPairStr=function(n,t){return t=this.options.attributeValueProcessor(n,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+n:" "+n+'="'+t+'"'};function p(n,t,r,s){const f=this.j2x(n,r+1,s.concat(t));return n[this.options.textNodeName]!==void 0&&Object.keys(n).length===1?this.buildTextValNode(n[this.options.textNodeName],t,f.attrStr,r):this.buildObjectNode(f.val,t,f.attrStr,r)}l.prototype.buildObjectNode=function(n,t,r,s){if(n==="")return t[0]==="?"?this.indentate(s)+"<"+t+r+"?"+this.tagEndChar:this.indentate(s)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let f="</"+t+this.tagEndChar,a="";return t[0]==="?"&&(a="?",f=""),(r||r==="")&&n.indexOf("<")===-1?this.indentate(s)+"<"+t+r+a+">"+n+f:this.options.commentPropName!==!1&&t===this.options.commentPropName&&a.length===0?this.indentate(s)+`<!--${n}-->`+this.newLine:this.indentate(s)+"<"+t+r+a+this.tagEndChar+n+this.indentate(s)+f}},l.prototype.closeTag=function(n){let t="";return this.options.unpairedTags.indexOf(n)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${n}`,t},l.prototype.buildTextValNode=function(n,t,r,s){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(s)+`<![CDATA[${n}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(s)+`<!--${n}-->`+this.newLine;if(t[0]==="?")return this.indentate(s)+"<"+t+r+"?"+this.tagEndChar;{let f=this.options.tagValueProcessor(t,n);return f=this.replaceEntitiesValue(f),f===""?this.indentate(s)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(s)+"<"+t+r+">"+f+"</"+t+this.tagEndChar}},l.prototype.replaceEntitiesValue=function(n){if(n&&n.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const r=this.options.entities[t];n=n.replace(r.regex,r.val)}return n};function i(n){return this.options.indentBy.repeat(n)}function e(n){return n.startsWith(this.options.attributeNamePrefix)&&n!==this.options.textNodeName?n.substr(this.attrPrefixLen):!1}return ut=l,ut}var lt,ir;function Kr(){if(ir)return lt;ir=1;const b=jt(),c=qr(),h=zr();return lt={XMLParser:c,XMLValidator:b,XMLBuilder:h},lt}Kr();function Wr(b,c){if(b.indexOf(c)>-1)return[c];const h=ye(b,c);return h.length?h:[]}async function ct(b){if(new Uint16Array(b,0,2)[0]===35615)try{const h=new Response(b),l=new DecompressionStream("gzip"),p=await h.body?.pipeThrough(l),i=await new Response(p).arrayBuffer();return await ct(i)}catch(h){console.error("eee",h)}return b}Qe.insensitive=!0;const Xr=/.*\.(avro|dbf|gpkg|gz|h5|jpg|jpeg|omx|png|shp|shx|sqlite|zip|zst)$/,jr=["simwrapper",".simwrapper"],be={};class Vr{baseUrl;urlId;slug;needsAuth;fsHandle;store;isGithub;isZIB;isFlask;isS3;type;fileLinkLookup={};constructor(c,h){this.urlId=c.slug,this.slug=c.slug,this.needsAuth=!!c.needPassword,this.fsHandle=c.handle||null,this.store=h||null,this.isGithub=!!c.isGithub,this.isFlask=!!c.flask,this.isZIB=!!c.isZIB,this.isS3=!!c.isS3,this.type=0,this.fsHandle&&(this.type=1),this.isGithub&&(this.type=2),this.isFlask&&(this.type=3),this.isZIB&&(this.type=4),this.isS3&&(this.type=5),this.baseUrl=c.baseURL,c.baseURL.endsWith("/")||(this.baseUrl+="/"),be[this.urlId]||(be[this.urlId]={})}hasHandle(){return!!this.fsHandle}async getChromePermission(c){return c&&await c.queryPermission({mode:"read"})!=="granted"&&this.store?await new Promise(i=>{this.store.commit("setFileHandleForPermissionRequest",{handle:c,resolve:i})}):!0}clearCache(){be[this.urlId]={}}cleanURL(c){let h=this.baseUrl+c.replace(/^0-9a-zA-Z_\-\/:+/i,"");return h=h.replaceAll("//","/"),h=h.replaceAll("//","/"),h=h.replace("https:/","https://"),h=h.replace("http:/","http://"),h=new URL(h).href,h}async _getFileResponse(c){switch(this.type){case 1:return this._getFileFromChromeFileSystem(c);case 2:return this._getFileFromGitHub(c);case 4:return this._getFileFromLakeFS(c);case 3:return this._getFileFromAzure(c);case 0:default:return this._getFileFetchResponse(c)}}async _getFileFromLakeFS(c,h){let l=c.replaceAll("//","/");l=c.replaceAll("//","/"),console.log({betterPath:l});let p=this.baseUrl+l;p.endsWith("/")&&(p=p.slice(0,-1));const i=l.slice(l.lastIndexOf("/")+1),e=this.fileLinkLookup[i];return e&&(p=e),console.log({lookup:e}),await fetch(p).then(t=>{if(t.status>=300)throw console.warn("Status:",t.status),t;return t})}async _getFileFetchResponse(c,h){const l=this.cleanURL(c),p={};h?.maxBytes&&(p.Range=`bytes=0-${h.maxBytes-1}`);const i=new Request(l,{headers:p});return await fetch(i).then(n=>{if(n.status>=300)throw console.warn("Status:",n.status),n;return n})}async _getDirectoryFromAzure(c){let h=c.replace(/^0-9a-zA-Z_\-\/:+/i,"");h=h.replaceAll("//","/"),h=h.replaceAll("//","/");let l=`${this.baseUrl}list/${this.slug}?prefix=${h}`;const p=new URL(l).href,i={};if(this.needsAuth){let r=localStorage.getItem(`auth-token-${this.slug}`);if(r||(r=prompt("This server requires an access token to continue")),r)localStorage.setItem(`auth-token-${this.slug}`,r),i.AZURETOKEN=r;else return{dirs:[],files:[],handles:{}}}const e=new Request(p,{headers:i}),n=await fetch(e);if(n.status==400){let r=prompt("Authorization failure. This server requires a valid access token to continue");return r?(localStorage.setItem(`auth-token-${this.slug}`,r),i.AZURETOKEN=r,await this._getDirectoryFromAzure(c)):{dirs:[],files:[],handles:{}}}if(n.status!=200)throw console.log("Status:",n.status),n;return await n.json()}getSlug(){return this.slug}async _getFileFromAzure(c){let h=c.replace(/^0-9a-zA-Z_\-\/:+/i,"");h=h.replaceAll("//","/"),h=h.replaceAll("//","/");let l=`${this.baseUrl}file/${this.slug}?prefix=${h}`;const p=new URL(l).href,i={},e=new Request(p,{headers:i}),n=await fetch(e);if(n.status!=200)throw console.log("Status:",n.status),n;return n}async _getFileFromChromeFileSystem(c,h){let l=c.replace(/^0-9a-zA-Z_\-\/:+/i,"");l=l.replaceAll("//","/"),l=new URL(`http://local/${l}`).href,l=l.substring(13);const p=l.lastIndexOf("/"),i=l.substring(0,p),e=decodeURIComponent(l.substring(p+1)),t=(await this.getDirectory(i)).handles[e];if(!t)throw Error(`File ${e} missing`);const r=await t.getFile();return r.json=()=>new Promise(async(s,f)=>{const a=await r.text(),R=JSON.parse(a);s(R)}),r.blob=()=>new Promise(async(s,f)=>{s(r)}),new Promise((s,f)=>{s(r)})}async _getFileFromGitHub(c){let h=c.replace(/^0-9a-zA-Z_\-\/:+/i,"");h=h.replaceAll("//","/"),h.startsWith("/")&&(h=h.slice(1));const l=h.split("/").filter(a=>!!a);if(l.length<2)return new Promise((a,R)=>{a(null)});const p=`${l[0]}/${l[1]}`;let i=`https://api.github.com/repos/${p}/contents/`;l.shift(),l.shift(),i+=l.join("/");const t={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${mt}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};let r=await await fetch(i,{headers:t}).then(a=>a.json()),s=r.content;if(s||(i=`https://api.github.com/repos/${p}/git/blobs/${r.sha}`,r=await await fetch(i,{headers:t}).then(a=>a.json()),s=r.content),r.encoding=="base64"){const a=Uint8Array.from(atob(r.content),R=>R.charCodeAt(0));Xr.test(c.toLocaleLowerCase())?s=a:s=new TextDecoder().decode(a)}else r.encoding=="utf-8"?s=new TextDecoder().decode(r.content):s=r.content;return{text:()=>new Promise((a,R)=>{a(s)}),json:()=>new Promise(async(a,R)=>{const x=JSON.parse(s);a(x)}),blob:()=>new Promise(async(a,R)=>{a(new Blob([s],{type:"application/octet-stream"}))})}}async _getDirectoryFromGitHub(c){let h=c.replace(/^0-9a-zA-Z_\-\/:+/i,"");h=h.replaceAll("//","/"),h.startsWith("/")&&(h=h.slice(1));const l={dirs:[],files:[],handles:{}},p=h.split("/").filter(s=>!!s);if(p.length<2)return l;let i=`https://api.github.com/repos/${p[0]}/${p[1]}/contents/`;p.shift(),p.shift(),i+=p.join("/");const t={Authorization:`Bearer ${["11","pat","github"].reverse().join("_")}${mt}_SyKezxQUoOKXAx3HwTH51I4funGUSFfxdbGG2X4l3WvUHIW62GOOmO0OMWZ`};return(await await fetch(i,{headers:t}).then(s=>s.json())).forEach(s=>{s.type=="file"&&l.files.push(s.name),s.type=="dir"&&l.dirs.push(s.name)}),l}async getFileText(c){return(await this._getFileResponse(c)).text()}async getFileJson(c){const p=await(await(await this._getFileResponse(c)).blob()).arrayBuffer(),i=await ct(p),e=new TextDecoder("utf-8").decode(i);return JSON.parse(e)}async getFileBlob(c){return(await this._getFileResponse(c)).blob()}async probeXmlFileType(c){let h=await this.getFileStream(c,{maxBytes:1024});c.toLocaleLowerCase().endsWith(".gz")&&(h=h.pipeThrough(new DecompressionStream("gzip")));const l=await h.getReader().read(),p=new Uint8Array(l.value),e=new TextDecoder("utf-8").decode(p.slice(0,Math.min(p.length,1024))).match(/<!DOCTYPE\s+(\w+)\s*(?:\[\s*([^\]]*)\s*\])?(?:\s+PUBLIC\s+"([^"]+)"\s+"([^"]+)"|(?:\s+SYSTEM\s+)?"([^"]+)")?/is);return e?e[1]:null}async getFileStream(c,h){let l;switch(this.type){case 1:return l=await this._getFileFromChromeFileSystem(c,h).then(i=>i.blob()).then(i=>i.stream()),l;case 0:return l=await this._getFileFetchResponse(c,h).then(i=>i.body),l;case 3:const p=`/file/${this.slug}?prefix=${c}`;return l=await this._getFileFetchResponse(p,h).then(i=>i.body),l;case 4:return l=await this._getFileFromLakeFS(c,h).then(i=>i.body),l;default:throw Error(`FileSystemType ${this.type} not implemented`)}}async getDirectory(c){let h=c.replaceAll("//","/");h.endsWith("/")||(h+="/");const l=be[this.urlId][h];if(l)return l;h=h.replaceAll("/./","/");try{let p;switch(this.type){case 1:p=await this._getDirectoryFromHandle(h);break;case 2:p=await this._getDirectoryFromGitHub(h);break;case 3:p=await this._getDirectoryFromAzure(h);break;case 5:p=await this._getDirectoryFromS3(h);break;case 4:case 0:default:p=await this._getDirectoryFromURL(h);break}return p.dirs.sort((i,e)=>Qe(i,e)),p.files.sort((i,e)=>Qe(i,e)),this.type!==4&&(be[this.urlId][h]=p),p}catch(p){throw Error(""+p)}}async _getDirectoryFromHandle(c,h){const l={files:[],dirs:[],handles:{}};if(!this.fsHandle||!await this.getChromePermission(this.fsHandle))return l;let i=c.split("/").filter(r=>!!r);function e(r){const s=r.indexOf("..");if(s<=0)return r;const f=r.filter((a,R)=>R!==s-1&&R!==s);return e(f)}const n=e(i);let t=this.fsHandle;if(n.length)for(const r of n){let s=!1;for await(let[f,a]of t)if(f===r){t=a,s=!0;break}if(!s)throw Error(`Could not find folder "${r}"`)}for await(let r of t.values())l.handles&&(l.handles[r.name]=r),r.kind==="file"?l.files.push(r.name):l.dirs.push(r.name);return l}async _getDirectoryFromS3(c){let h=c.replace(/^\/+/,"");h=h.replaceAll("//","/");const l=`${this.baseUrl}?list-type=2&delimiter=/&prefix=${encodeURIComponent(h)}`,p=await fetch(l);if(p.status!==200)throw console.warn("S3 list status:",p.status),p;const i=await p.text();return this.buildListFromS3Xml(i,h)}buildListFromS3Xml(c,h){const l=[],p=[],e=new DOMParser().parseFromString(c,"text/xml"),n=e.getElementsByTagName("Contents");for(let r=0;r<n.length;r++){const s=n[r].getElementsByTagName("Key")[0];if(s&&s.textContent){let f=s.textContent;f.startsWith(h)&&(f=f.substring(h.length)),f&&f!==""&&!f.endsWith("/")&&p.push(f)}}const t=e.getElementsByTagName("CommonPrefixes");for(let r=0;r<t.length;r++){const s=t[r].getElementsByTagName("Prefix")[0];if(s&&s.textContent){let f=s.textContent;f.startsWith(h)&&(f=f.substring(h.length)),f.endsWith("/")&&(f=f.slice(0,-1)),f&&f!==""&&l.push(f)}}return{dirs:l,files:p,handles:{}}}async _getDirectoryFromURL(c){const l=await(await this._getFileResponse(c)).text();return this.buildListFromHtml(l)}async findAllYamlConfigs(c){const h={dashboards:{},topsheets:{},vizes:{},configs:{}},l=[];let p="/";const e=(c.startsWith("/")?c:"/"+c).split("/");for(const f of e.slice(0,e.length-1)){p=`${p}${f}/`.replaceAll("//","/");try{const{dirs:a}=await this.getDirectory(p);for(const R of a)jr.includes(R.toLocaleLowerCase())&&l.push(`${p}/${R}`.replaceAll("//","/"))}catch{}}l.push(c);const n="dashboard*.y?(a)ml",t="(topsheet|table)*.y?(a)ml",r="viz*.y?(a)ml",s="simwrapper-config.y?(a)ml";for(const f of l){const{files:a}=await this.getDirectory(f);ye.match(a,n).map(R=>h.dashboards[R]=`${f}/${R}`.replaceAll("//","/")),ye.match(a,t).map(R=>h.topsheets[R]=`${f}/${R}`.replaceAll("//","/")),ye.match(a,r).map(R=>h.vizes[R]=`${f}/${R}`.replaceAll("//","/")),ye.match(a,s).map(R=>h.configs[R]=`${f}/${R}`.replaceAll("//","/"))}return h}buildListFromHtml(c){return c.indexOf("<title>lakeFS File Browser")>-1?this.buildListFromLakeFS(c):c.indexOf("SimpleWebServer")>-1?this.buildListFromSimpleWebServer(c):c.indexOf("<ul>")>-1?this.buildListFromSVN(c):c.indexOf('<ul id="files">')>-1?this.buildListFromNpxServe(c):c.indexOf("<table>")>-1?this.buildListFromApache24(c):c.indexOf(`
<a `)>-1?this.buildListFromNGINX(c):{dirs:[],files:[],handles:{}}}buildListFromLakeFS(c){const h=/">(.*?)<\/a/,l=/href="(.*?)" target/,p=[],i=[];return c.split(`
`).filter(t=>t.startsWith("<li>")).forEach(t=>{if(t.indexOf('<a href="')<0)return;const s=t.match(h);if(!s)return;const f=s[1];if(t.startsWith("<li>[DIR]"))p.push(f.substring(0,f.length));else{const a=t.match(l);if(!a)return;const R=a[1];i.push(f),this.fileLinkLookup[f]=R}}),console.log({dirs:p,files:i,lookup:this.fileLinkLookup}),{dirs:p,files:i,handles:{}}}buildListFromSimpleWebServer(c){const h=/">(.*?)<\/a/,l=[],p=[],i=c.split(`
`);for(const e of i){if(e.indexOf('<li><a href="')<0)continue;const t=e.match(h);if(!t)continue;const r=t[1];r.endsWith("/")?l.push(r.substring(0,r.length-1)):p.push(r)}return{dirs:l,files:p,handles:{}}}buildListFromNpxServe(c){const h=/"(.*?)"/;let l=[],p=[];const i=c.split("</li>").map(e=>e.slice(e.lastIndexOf("<li")));for(const e of i){const n=e.indexOf('<li> <a href="');if(n<0||n>512)continue;const t=e.match(h);if(!t)continue;let r=t[1];r=r.replaceAll("&#47;","/"),r!=="/"&&r!=="../"&&(r.endsWith("/")?l.push(r.substring(0,r.length-1)):p.push(r))}return l=l.map(e=>e.slice(1+e.lastIndexOf("/"))),p=p.map(e=>e.slice(1+e.lastIndexOf("/"))),{dirs:l,files:p,handles:{}}}buildListFromSVN(c){const h=/"(.*?)"/,l=[],p=[],i=c.split(`
`);for(const e of i){if(e.indexOf('<li><a href="')<0)continue;const t=e.match(h);if(!t)continue;let r=t[1];r!=="../"&&(r.startsWith("./")&&(r=r.substring(2)),r.endsWith("/")?l.push(r.substring(0,r.length-1)):p.push(r))}return{dirs:l,files:p,handles:{}}}buildListFromApache24(c){const h=/"(.*?)"/,l=[],p=[],i=c.split(`
`);for(const e of i){if(e.indexOf('<th "')>-1||e.indexOf("[PARENTDIR]")>-1)continue;const n=e.indexOf('<td><a href="');if(n<0)continue;const t=e.substring(n).match(h);if(!t)continue;const r=t[1];r!=="../"&&(r.endsWith("/")?l.push(r.substring(0,r.length-1)):p.push(r))}return{dirs:l,files:p,handles:{}}}buildListFromNGINX(c){const h=/"(.*?)"/,l=[],p=[],i=c.split(`
`);for(const e of i){const n=e.indexOf('<a href="');if(n<0)continue;const t=e.substring(n).match(h);if(!t)continue;const r=t[1];r!=="../"&&(r.endsWith("/")?l.push(r.substring(0,r.length-1)):p.push(r))}return{dirs:l,files:p,handles:{}}}}let ft,me="",ht=[],ae={},ce="",dt,pt=!1,Ae=[];const pe={};onmessage=function(b){Zr(b.data)},postMessage({ready:!0});async function Zr(b){if(ae=b.config,ce=ae.dataset,b.options?.highPrecision&&(pt=!0),b.featureProperties){Qr(b.featureProperties),postMessage(pe[ce]);return}if(b.buffer){dt=b.buffer,or(ce,dt),postMessage(pe[ce]);return}ft=new Vr(b.fileSystemConfig),me=b.subfolder,ht=b.files,dt=b.buffer;try{const c=ae.dataset.indexOf("/");if(c>-1){let h=me;me&&(h+="/");const l=c===0?ae.dataset:`${h}${ae.dataset}`;ce=l.substring(1+l.lastIndexOf("/")),me=l.substring(0,l.lastIndexOf("/"));let p=me.startsWith("./")?me.slice(2):me;const{files:i}=await ft.getDirectory(p);ht=i}await Yr(),Ae.length&&(pe[ce]._comments=Ae),postMessage(pe[ce])}catch(c){const h=""+c;postMessage({error:h})}}function Qr(b){const c={},h=b[0];let l=Object.keys(h).sort();if(ae.drop){let p=Array.isArray(ae.drop)?ae.drop:ae.drop.split(",");p.length&&(console.log("DROPPING",p),l=l.filter(i=>p.indexOf(i)==-1))}if(ae.keep){let p=Array.isArray(ae.keep)?ae.keep:ae.keep.split(",");p.length&&(console.log("KEEPING",p),l=l.filter(i=>p.indexOf(i)>-1))}for(const p of l){let i,e=le.NUMBER;typeof h[p]=="number"?(i=pt?new Float64Array(b.length):new Float32Array(b.length),i.fill(NaN)):(i=[],e=le.STRING),c[p]={name:p,values:i,type:e}}for(let p=0;p<b.length;p++){const i=b[p];for(const e of l){const n=i[e];c[e].values[p]=n}}pe[ce]=c,gt(ce,c)}async function Yr(){const b=ce,c=Wr(ht,b);if(c.length==0)throw Error(`File not found: "${b}"`);if(c.length>1)throw Error(`More than one file matched "${b}": ${c}`);const h=c[0],l=await en(h);or(h,l)}async function or(b,c){try{if(b&&b.toLocaleLowerCase().endsWith(".dbf")){const h=hr(c,new TextDecoder("windows-1252"));gt(ce,h),pe[ce]=h}else{const h=new TextDecoder().decode(c);await Jr(ce,b,h)}}catch(h){const l=(""+h).replaceAll("Error: ","");postMessage({error:l})}}async function Jr(b,c,h){function l(p,i){return Array.isArray(i)&&i.length>0?l(p[i[0]],i.slice(1)):p}if(c.indexOf(".xml")>-1){const p={},i=ae;if(i.xmlElements){const e=i.xmlElements.split(".");l(p,e),pe[b]={}}else pe[b]={};return}Dr(b,c,h)}function Dr(b,c,h){const l={},p={},i=yr.parse(h,{delimitersToGuess:["	",";",","," "],comments:"#",skipEmptyLines:!0,dynamicTyping:!0,header:!0,transformHeader:(n,t)=>(p[n]||(p[n]=0),p[n]+=1,p[n]>1?`${n.trim()}_${p[n]-1}`:n.trim())});if(!i.data?.length)throw console.error("NODATA - Papaparse returned nothing!"),Error("Bad format, no data, or too large - Error loading");let e=i.meta.fields||[];if(ae.drop){let n=Array.isArray(ae.drop)?ae.drop:ae.drop.split(",");n.length&&(console.log("DROPPING",n),e=e.filter(t=>n.indexOf(t)==-1))}if(ae.keep){let n=Array.isArray(ae.keep)?ae.keep:ae.keep.split(",");n.length&&(console.log("KEEPING",n),e=e.filter(t=>n.indexOf(t)>-1))}for(const n of e){const t=pt?new Float64Array(i.data.length).fill(NaN):new Float32Array(i.data.length).fill(NaN);l[n]={name:n,values:t,type:le.NUMBER}}for(let n=0;n<i.data.length;n++){const t=i.data[n];for(const r of e){const s=t[r];if(s!=="")if(Number.isFinite(s))l[r].values[n]=s;else if(Array.isArray(l[r].values))l[r].values[n]=s;else{const f=Array.from(l[r].values.slice(0,n));typeof s=="string"&&(l[r].type=le.STRING),typeof s=="boolean"&&(l[r].type=le.BOOLEAN),f[n]=s,l[r].values=f}}}gt(b,l),pe[b]=l,Ae=[...new Set(i.comments)],Ae.length&&console.log({_comments:Ae})}function gt(b,c){for(const h of Object.values(c)){if(h.type!==le.NUMBER)continue;let l=-1/0;for(const p of h.values)l=Math.max(l,p);h.max=l}}async function en(b){const c=`${me}/${b}`,h=await ft.getFileBlob(c);if(!h)throw Error("BLOB IS NULL");const l=await h.arrayBuffer();return await ct(l)}})();
