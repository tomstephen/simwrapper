# Example AequilibraE visualization configuration
# Place this file alongside your project_database.sqlite file

title: "AequilibraE Network Visualization"
description: "Visualize network nodes, links, and zones from AequilibraE"

# Path to the AequilibraE database file (relative to this YAML file)
database: project_database.sqlite

# Optional: Additional databases for joining results data
# Keys are reference names used in layer join configurations
extraDatabases:
  results: results_database.sqlite
  # You can add multiple: another_db: another_results.sqlite

# Define which database tables/layers to render and their styling
layers:
  zones:
    table: zones  # Table name in the database
    type: polygon  # geometry type: polygon, line, point
    fillColor: "#E5E5E5"  # Light grey fill
    strokeColor: "#666666"  # Dark grey outline
    strokeWidth: 2
    opacity: 0.6
    zIndex: 1  # Render order (lower = underneath)
    
  links:
    table: links
    type: line
    
    # Join simulation results from an external database
    join:
      database: results              # Reference to extraDatabases key
      table: car_skims_results       # Table name in the results database
      leftKey: link_id               # Column in links table
      rightKey: link_id              # Column in results table
      type: left                     # left = keep all links, inner = only matched
      # columns: [travel_time_ratio, volume]  # Optional: specific columns only
    
    # Style using columns from both main and joined tables
    style:
      lineColor:
        column: travel_time_ratio    # Column from joined results
        scheme: RdYlGn               # Red-Yellow-Green diverging scale
        # reversed: true             # Optional: reverse the color scale
      lineWidth:
        column: lanes_ab             # Column from main links table
        range: [1, 6]
    
    strokeColor: "#FF6600"  # Fallback color if no style defined
    strokeWidth: 3
    opacity: 0.9
    zIndex: 2
    
  nodes:
    table: nodes
    type: point
    fillColor: "#0066CC"  # Blue points
    radius: 4
    opacity: 0.8
    zIndex: 3  # Render on top

# Optional: Color features by properties
# colorBy:
#   property: "volume"  # Column name to color by
#   colorScale: "viridis"  # Color scale: viridis, plasma, inferno, turbo
#   range: [0, 1000]  # Data range for color scaling
